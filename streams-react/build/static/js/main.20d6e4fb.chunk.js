(this["webpackJsonpstreams-react"]=this["webpackJsonpstreams-react"]||[]).push([[0],{106:function(e,t,n){e.exports={button:"SubmitButton_button__3VF97"}},107:function(e,t,n){e.exports={container:"RoomForm_container__alDIN"}},108:function(e,t,n){e.exports={control__button:"VideoControlsButton_control__button__3hs18"}},110:function(e,t,n){e.exports={identicon:"Identicon_identicon__2bxpZ"}},112:function(e,t,n){e.exports={container:"ChatList_container__2lgwL"}},113:function(e,t,n){e.exports={container:"RoomContainer_container__1UDS-"}},148:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=148},194:function(e,t,n){},195:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(101),r=n.n(o),s=n(31),i=n(11),l=n(32),u=n(3),d=n(22),_=n(23),m=n.n(_),j=n(34),b=n(73),h=n(72),f=n(8),O=n(4),v=n(102),p=n(103),g=n.n(p),x=n(104),C=n.n(x),N=n(1),y=Object(a.createContext)(),w=null,S=null,k=function(e){var t=e.children,n=Object(a.useState)(""),c=Object(u.a)(n,2),o=c[0],r=c[1],s=Object(a.useState)({}),i=Object(u.a)(s,2),l=i[0],_=i[1],p=Object(a.useState)(!1),x=Object(u.a)(p,2),k=x[0],E=x[1],I=Object(a.useState)(!1),D=Object(u.a)(I,2),T=D[0],R=D[1],F=Object(a.useState)(!1),M=Object(u.a)(F,2),V=M[0],H=M[1],B=Object(a.useState)({}),L=Object(u.a)(B,2),U=L[0],A=L[1],W=Object(a.useState)({}),P=Object(u.a)(W,2),q=P[0],z=P[1],K=Object(a.useState)({}),J=Object(u.a)(K,2),G=J[0],Z=J[1],Q=Object(a.useState)(""),Y=Object(u.a)(Q,2),X=Y[0],$=Y[1],ee=Object(a.useState)(""),te=Object(u.a)(ee,2),ne=te[0],ae=te[1],ce=Object(a.useState)({}),oe=Object(u.a)(ce,2),re=oe[0],se=oe[1],ie=Object(a.useState)({}),le=Object(u.a)(ie,2),ue=le[0],de=le[1],_e=Object(a.useState)(!1),me=Object(u.a)(_e,2),je=me[0],be=me[1],he=Object(a.useState)(!1),fe=Object(u.a)(he,2),Oe=fe[0],ve=fe[1],pe=Object(a.useRef)(U),ge=Object(a.useRef)(q),xe=Object(a.useRef)(G),Ce=Object(a.useRef)(X),Ne=Object(a.useRef)(ne),ye=Object(a.useRef)(T);Object(a.useEffect)((function(){if(Object.keys(U).length&&w&&X!==Ce.current){var e=Object.entries(U).find((function(e){return e[1].displayName===Ce.current}));Ee(e[0],X),w.emit("change-username",S.id,Ce.current,X)}}),[X,U]),Object(a.useEffect)((function(){ne!==Ne.current&&w&&V&&w.emit("change-roomname",Ne.current,ne)}),[ne,V]),Object(a.useEffect)((function(){w&&l.id&&(Ie(l.id,k),Object.keys(q).length&&w.emit("change-webcam-status",S.id,l.id,k))}),[k,l.id,q]),Object(a.useEffect)((function(){w&&l.id&&T!==ye.current&&(T?navigator.mediaDevices.getDisplayMedia().then((function(e){e.getVideoTracks()[0].addEventListener("ended",(function(){R(!1)})),ke(l,e,S)})).catch((function(e){R(!1),console.log(e)})):navigator.mediaDevices.getUserMedia({video:{width:{min:640},height:{min:480}}}).then((function(e){ke(l,e,S)})).catch((function(e){var t=De();ke(l,t,S,!0),E(!1),console.log(e)})))}),[T,l]),Object(a.useEffect)((function(){pe.current=U,ge.current=q,xe.current=G,Ce.current=X,Ne.current=ne,ye.current=T}),[U,q,G,X,ne,T]),Object(a.useEffect)((function(){var e=function(){navigator.mediaDevices.getUserMedia({video:{width:{min:640},height:{min:480}},audio:!0}).then((function(e){t(e,!0),a(e);var n=r(e,!0);_(e),A((function(t){return Object(O.a)(Object(O.a)({},t),{},Object(f.a)({},e.id,{streamID:e,displayName:Ce.current,hark:n,hasWebcam:!0}))})),E(!0)})).catch((function(e){console.log(e);var n=Te(),c=De();n.addTrack(c),t(n,!1),a(n);var o=r(n,!0);_(n),A((function(e){return Object(O.a)(Object(O.a)({},e),{},Object(f.a)({},n.id,{streamID:n,displayName:Ce.current,hark:o,hasWebcam:!1}))})),E(!1)}))},t=function(e,t){w.on("user-connected",(function(t){c(t,e)})),w.on("user-disconnected",(function(e){var t=ge.current;if(t[e]){t[e].call.close();t[e];var n=Object(b.a)(t,[e].map(h.a));z(n)}w.emit("get-users-list",null,!1)})),w.on("users-list",(function(e){Z(Object(O.a)({},e))})),w.on("username-changed",(function(e,t,n){var a=ge.current[e].callStreamID.id;Ee(a,n)})),w.on("webcam-status-changed",(function(e,t,n,a){Z(Object(O.a)({},t)),pe.current[n]&&Ie(n,a)})),w.emit("get-users-list",t),w.emit("stream-ready")},n=[],a=function(e){S.on("call",(function(t){t.answer(e),t.on("stream",(function(e){if(n[t.peer])n=[];else{var a=r(e,!1);we(t.peer,e,t,e,a),n[t.peer]=t}})),t.on("close",(function(){Se()}))}))},c=function(e,t){var a=S.call(e,t,{constraints:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},offerToReceiveAudio:1,offerToReceiveVideo:1}});a.on("stream",(function(t){if(n[a.peer])n=[];else{var c=r(t,!1);we(e,t,a,a._remoteStream,c),n[a.peer]=a}})),a.on("close",(function(){Se()}))},r=function(e,t){var n=new(window.AudioContext||window.webkitAudioContext),a=n.createMediaStreamSource(e),c=n.createGain();return de((function(n){return Object(O.a)(Object(O.a)({},n),{},Object(f.a)({},e.id,{gainNode:c,isHost:t}))})),a.connect(c),c.connect(n.destination),function(e,t,n){var a={threshold:-55,audioContext:t},c=C()(e,a,n);return c.on("speaking",(function(){se((function(t){return Object(O.a)(Object(O.a)({},t),{},Object(f.a)({},e.id,!0))}))})),c.on("stopped_speaking",(function(){se((function(t){return Object(O.a)(Object(O.a)({},t),{},Object(f.a)({},e.id,!1))}))})),c.on("volume_change",(function(){"suspended"===t.state&&t.resume()})),c}(e,n,c)};return o&&((w=Object(v.io)(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SOCKET_HOST,{reconnection:!0})).on("peer-server-connected",(function(){e()})),w.on("room-name",(function(e){ae(e)})),w.on("is-host",(function(e){H(e)})),w.on("connect",(function(e){ve(!1)})),w.on("connect_error",(function(e){console.log(e),ve(e)})),w.on("error",(function(e){console.log(e),ve(e)})),(S=new g.a).on("open",(function(e){be(!1),w.emit("join-room",o,e,Ce.current,Ne.current)})),S.on("error",(function(e){console.log(e),be(e),S.disconnected&&!S.destroyed&&S.reconnect()}))),function(){if(w&&o){w.removeAllListeners(),w.close(),w=null,_((function(e){return e.id&&e.getTracks().forEach((function(e){e.stop()})),{}}));for(var e=0,t=Object.values(pe.current);e<t.length;e++){t[e].hark.stop()}S.destroy(),E(!1),A({}),z({}),se({}),be(!1),ve(!1)}}}),[o]);var we=function(e,t,n,a,c){A((function(n){return Object(O.a)(Object(O.a)({},n),{},Object(f.a)({},t.id,{streamID:t,displayName:xe.current[e].displayName,hark:c,hasWebcam:xe.current[e].hasWebcam}))})),z((function(t){return Object(O.a)(Object(O.a)({},t),{},Object(f.a)({},e,{call:n,callStreamID:a}))}))},Se=function(){var e=Object(j.a)(m.a.mark((function e(){var t,n,a,c,o,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout((function(){return e(pe.current)}))}),0);case 2:t=e.sent,n=t,a=0,c=Object.entries(n);case 5:if(!(a<c.length)){e.next=15;break}if(o=Object(u.a)(c[a],2),r=o[0],o[1].streamID.active){e.next=12;break}return n[r],s=Object(b.a)(n,[r].map(h.a)),n[r].hark.stop(),A(s),e.abrupt("return");case 12:a++,e.next=5;break;case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(e,t,n,a){e.getVideoTracks().length&&(e.getVideoTracks()[0].stop(),e.removeTrack(e.getVideoTracks()[0])),e.addTrack(a?t:t.getVideoTracks()[0]);var c,o=Object(d.a)(n._connections);try{for(o.s();!(c=o.n()).done;){var r=Object(u.a)(c.value,2)[1];if(r.length){var s,i,l=Object(d.a)(null===(s=r[0].peerConnection)||void 0===s?void 0:s.getSenders());try{for(l.s();!(i=l.n()).done;){var _,m=i.value;"video"!==(null===(_=m.track)||void 0===_?void 0:_.kind)&&null!==m.track||m.replaceTrack(a?t:t.getVideoTracks()[0])}}catch(j){l.e(j)}finally{l.f()}}}}catch(j){o.e(j)}finally{o.f()}},Ee=function(e,t){A((function(n){return Object(O.a)(Object(O.a)({},n),{},Object(f.a)({},e,Object(O.a)(Object(O.a)({},n[e]),{},{displayName:t})))}))},Ie=function(e,t){A((function(n){return Object(O.a)(Object(O.a)({},n),{},Object(f.a)({},e,Object(O.a)(Object(O.a)({},n[e]),{},{hasWebcam:t})))}))},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=void 0===t?640:t,a=e.height,c=void 0===a?480:a,o=Object.assign(document.createElement("canvas"),{width:n,height:c});o.getContext("2d").fillRect(0,0,n,c);var r=o.captureStream();return Object.assign(r.getVideoTracks()[0],{enabled:!1})},Te=function(){var e=(new(window.AudioContext||window.webkitAudioContext)).createMediaStreamDestination();return new MediaStream(e.stream)};return Object(N.jsx)(y.Provider,{value:{socket:w,peer:S,stream:l,shareScreen:T,isHost:V,videoStreams:U,displayName:X,roomName:ne,isTalking:re,gainStreams:ue,users:G,hasPeerError:je,hasSocketError:Oe,setHasWebcam:E,setShareScreen:R,setDisplayName:$,setRoomName:ae,setParams:r},children:t})},E=Object(a.createContext)(),I=function(e){var t=e.children,n=Object(a.useState)(!1),c=Object(u.a)(n,2),o=c[0],r=c[1],s=Object(a.useState)({width:0}),i=Object(u.a)(s,2),d=i[0],_=i[1],m=Object(a.useState)(""),j=Object(u.a)(m,2),b=j[0],h=j[1],f=Object(a.useState)(!1),O=Object(u.a)(f,2),v=O[0],p=O[1],g=Object(a.useState)(!0),x=Object(u.a)(g,2),C=x[0],w=x[1],S=Object(a.useState)([]),k=Object(u.a)(S,2),I=k[0],D=k[1],T=Object(a.useState)(!1),R=Object(u.a)(T,2),F=R[0],M=R[1],V=Object(a.useContext)(y),H=V.socket,B=V.stream,L=V.displayName;Object(a.useEffect)((function(){var e=function(){H.emit("get-messages-list")};if(H){if(b){var t={message:"".concat(b),streamID:B.id,createdAt:(new Date).getTime(),userName:L,ogMeta:{}};H.emit("send-message",t),h("")}v&&C&&H.emit("get-older-messages",20),H.on("joined-room",e),H.on("message-received",U),H.on("updated-message",A),H.on("older-messages-received",W),H.on("messages-list",q),H.on("all-older-messages-received",P)}return function(){H?(H.removeListener("joined-room",e),H.removeListener("message-received",U),H.removeListener("updated-message",A),H.removeListener("older-messages-received",W),H.removeListener("messages-list",q),H.removeListener("all-older-messages-received",P)):(w(!0),D([]),M(!1),p(!1))}}),[H,b,L,v,B.id,C]);var U=function(e){D((function(t){return[].concat(Object(l.a)(t),[e])}))},A=function(e){D((function(t){return t.map((function(t){return t.id===e.id?e:t}))}))},W=function(e){D((function(t){return Object(l.a)(e)})),p(!1)},P=function(e){w(!1)},q=function(e){D((function(t){return[].concat(Object(l.a)(t),Object(l.a)(e))})),M((function(e){return!0}))};return Object(N.jsx)(E.Provider,{value:{isChatOpen:o,chatDimensions:d,messageList:I,hasOlderMessages:C,isAtTop:v,hasInitMessages:F,setIsChatOpen:r,setChatDimensions:_,setMessage:h,setIsAtTop:p},children:t})},D=n(6),T=n.n(D),R=function(){var e=Object(a.useContext)(E),t=e.isChatOpen,n=e.setIsChatOpen,c=Object(a.useContext)(y).socket,o=function(){n((function(e){return!e}))};return Object(N.jsx)("nav",{className:T.a.nav,children:Object(N.jsxs)("div",{className:T.a.container,children:[Object(N.jsxs)("div",{className:T.a.logo__container,children:[Object(N.jsx)(s.b,{to:"/",className:T.a.logo,children:"MSRIT Connect"}),Object(N.jsx)("div",{className:T.a.underline})]}),Object(N.jsxs)("div",{className:"".concat(c?T.a.hamburger:T.a.hidden),onClick:o,onKeyDown:function(e){32!==e.keyCode&&13!==e.keyCode||o()},tabIndex:"0",children:[Object(N.jsx)("div",{className:"".concat(T.a.line," ").concat(T.a.line__one," ").concat(t?T.a.hidden:T.a["line__one--closed"])}),Object(N.jsx)("div",{className:"".concat(T.a.line," ").concat(T.a.line__two," ").concat(t?T.a.hidden:T.a["line__two--closed"])}),Object(N.jsx)("div",{className:"".concat(T.a.line," ").concat(T.a.line__three," ").concat(t?T.a.hidden:T.a["line__three--closed"])}),Object(N.jsx)("div",{className:"".concat(T.a.line," ").concat(T.a.line__one," ").concat(t?T.a["line__one--open"]:T.a.hidden)}),Object(N.jsx)("div",{className:"".concat(T.a.line," ").concat(T.a.line__two," ").concat(t?T.a["line__two--open"]:T.a.hidden)}),Object(N.jsx)("div",{className:"".concat(T.a.line," ").concat(T.a.line__three," ").concat(t?T.a["line__three--open"]:T.a.hidden)})]})]})})},F=[{type:"text",label:"Display Name",name:"username",required:!0,id:"username-1",max:"32",autoComplete:"on"},{type:"text",label:"Room",name:"room",required:!0,id:"room-1",autoComplete:"on"}],M=[{type:"text",label:"Display Name",name:"username",required:!0,id:"username-2",max:"32",autoComplete:"on"},{type:"text",label:"Room ID",name:"room",required:!0,id:"room-2",autoComplete:"off"}],V=n(25),H=n.n(V),B=function(e){var t=e.inputs,n=e.handleChange,o=e.clearInput,r=e.handleSubmit,s=Object(a.useState)(!1),i=Object(u.a)(s,2),l=i[0],_=i[1],b=Object(a.useState)(""),h=Object(u.a)(b,2),f=h[0],O=h[1],v=Object(a.useState)(40),p=Object(u.a)(v,2),g=p[0],x=p[1],C=Object(a.useRef)(t.map((function(){return Object(a.createRef)()}))),y=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("clipboard"in navigator)){e.next=8;break}return e.next=3,navigator.clipboard.readText();case 3:c=e.sent,n({target:{name:a,value:c}}),e.next=11;break;case 8:document.getElementById(t).focus(),document.execCommand("paste");case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(e){var t=e.target.id.split("__");_(!l),O(t[0])},S=function(){_(!l),O("")};return Object(a.useEffect)((function(){var e,t=function(e){e.style.height="0px";var t=e.scrollHeight;e.style.height=t+"px",x(t)},n=Object(d.a)(C.current);try{for(n.s();!(e=n.n()).done;){var a=e.value.current;if(!a)return;t(a)}}catch(c){n.e(c)}finally{n.f()}}),[t]),Object(a.useEffect)((function(){var e,t=C.current,n=function(e){13!==e.keyCode||e.shiftKey||r(e)},a=Object(d.a)(C.current);try{for(a.s();!(e=a.n()).done;){var c=e.value.current;if(!c)return;c.addEventListener("keypress",n)}}catch(o){a.e(o)}finally{a.f()}return function(){var e,a=Object(d.a)(t);try{for(a.s();!(e=a.n()).done;){var c=e.value.current;if(!c)return;c.removeEventListener("keypress",n)}}catch(o){a.e(o)}finally{a.f()}}}),[t,r]),t.map((function(e,t){var a=null;switch(e.formType){case"textarea":a=Object(N.jsx)("textarea",{id:e.id,className:"".concat(H.a.input," ").concat(H.a.textarea),style:{height:"".concat(g,"px")},name:e.name,placeholder:e.label,required:e.required,value:e[e.name],onChange:n,autoComplete:e.autoComplete,ref:C.current[t]});break;default:a=Object(N.jsx)("input",{id:e.id,className:H.a.input,type:e.type,name:e.name,placeholder:e.label,required:e.required,value:e[e.name],onChange:n,maxLength:e.max,autoComplete:e.autoComplete})}return Object(N.jsxs)(c.a.Fragment,{children:[Object(N.jsx)("label",{className:H.a.label,htmlFor:e.id,children:e.label}),Object(N.jsxs)("div",{className:"".concat(H.a.container," ").concat(H.a.container__input),children:[a,Object(N.jsxs)("div",{className:"".concat(H.a.input__options," \n              ").concat(l&&f===e.id?H.a["input__options--active"]:"","\n              ").concat("textarea"===e.formType?g+4===40?"":H.a.move__scrollbar:""),children:[Object(N.jsx)("button",{id:"".concat(e.id,"__clear"),type:"button",className:H.a.clear,onClick:function(){return o(e.name)},onFocus:w,onBlur:S,children:Object(N.jsx)("i",{className:"fas fa-times"})}),Object(N.jsx)("button",{id:"".concat(e.id,"__paste"),className:H.a.paste,type:"button",onClick:function(){return y(e.id,e.name)},onFocus:w,onBlur:S,children:Object(N.jsx)("i",{className:"fas fa-clipboard"})})]})]})]},e.name)}))},L=n(106),U=n.n(L),A=function(e){var t=e.text;return Object(N.jsx)("button",{className:U.a.button,type:"submit",children:t})},W=n(107),P=n.n(W),q=function(e){var t=e.inputs,n=e.handleChange,a=e.handleSubmit,c=e.clearInput;return Object(N.jsxs)("form",{className:P.a.container,onSubmit:a,children:[Object(N.jsx)(B,{inputs:t,handleChange:n,clearInput:c}),Object(N.jsx)(A,{text:"Join"})]})},z=function(e){var t=e.error;return t&&t.message?Object(N.jsx)("div",{children:Object(N.jsxs)("p",{children:["An error has occured: ",t.message]})}):null};function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(u.a)(t,2),c=n[0],o=n[1],r=Object.values(e).join("");Object(a.useEffect)((function(){o(e)}),[r]);var s=function(e){var t=e.target,n=t.value,a=t.name;o(Object(O.a)(Object(O.a)({},c),{},Object(f.a)({},a,n)))},i=function(e){var t=e.target,n=t.value,a=t.name;o(Object(O.a)(Object(O.a)({},c),{},Object(f.a)({},a,c[a]+n)))},l=function(){o(e)},d=function(){var e=Object(O.a)({},c);Object.keys(e).map((function(t){return e[t]=""})),o(e)},_=function(e){o((function(t){return Object(O.a)(Object(O.a)({},t),{},Object(f.a)({},e,""))}))};return{values:c,setValues:o,handleChange:s,handleAdd:i,resetForm:l,clearForm:d,clearInput:_}}var J=function(e){var t=Object(a.useState)(localStorage.getItem(e)||""),n=Object(u.a)(t,2),c=n[0],o=n[1];return Object(a.useEffect)((function(){localStorage.setItem(e,c)}),[c,e]),[c,o]},G=n(69),Z=n.n(G),Q=function(e){var t=e.header,n=e.inputs,c=Object(i.f)(),o=K({username:"",room:""}),r=o.values,s=o.handleChange,l=o.clearInput,d=J("userName"),_=Object(u.a)(d,2)[1],b=J("roomName"),h=Object(u.a)(b,2)[1],v=Object(a.useState)(!1),p=Object(u.a)(v,2),g=p[0],x=p[1],C=n.map((function(e){return Object(O.a)(Object(O.a)({},e),{},Object(f.a)({},e.name,r[e.name]))})),y=function(){var e=Object(j.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,fetch("/api/uuid");case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent.id,_(r.username),h(r.room),c.push("/room/".concat(a)),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),x(e.t0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)("div",{className:Z.a.container,children:[Object(N.jsx)("h1",{className:Z.a.header,children:t}),Object(N.jsx)(q,{inputs:C,handleChange:s,handleSubmit:y,clearInput:l}),Object(N.jsx)(z,{error:g})]})},Y=["video chat!","text chat!","screen share!","have fun!"],X=n(199),$=n(37),ee=n.n($),te=function(e){var t=e.mainHeader,n=e.subHeader,c=e.cycle,o=Object(a.useState)(0),r=Object(u.a)(o,2),s=r[0],i=r[1],l=Object(a.useState)(Y.length?Y[s]:""),d=Object(u.a)(l,2),_=d[0],m=d[1],j=Object(a.useRef)(null);Object(a.useEffect)((function(){if(c||Y[s+1]){var e=j.current,t=function(){Y[s+1]&&(m(Y[s+1]),i(s+1))};return e&&_&&e.addEventListener("animationend",t),function(){e&&_&&e.removeEventListener("animationend",t)}}}),[_,c,s]);return Object(N.jsxs)("div",{className:ee.a.container,children:[Object(N.jsx)("h1",{className:ee.a.main__header,children:t}),Object(N.jsxs)("h2",{className:ee.a.sub__header,children:[n," ",c?Y[s+1]?Object(N.jsx)("span",{ref:j,className:ee.a.cycled__word,children:_},Object(X.a)()):Object(N.jsx)("span",{ref:j,className:"".concat(ee.a.cycled__word," ").concat(ee.a["cycled__word--stop"]),children:_},Object(X.a)()):""]})]})},ne=n(70),ae=n.n(ne),ce=function(e){var t=e.header,n=e.inputs,c=Object(i.f)(),o=K({username:"",room:""}),r=o.values,s=o.handleChange,l=o.clearInput,d=J("userName"),_=Object(u.a)(d,2)[1],b=J("roomName"),h=Object(u.a)(b,2)[1],v=Object(a.useState)(!1),p=Object(u.a)(v,2),g=p[0],x=p[1],C=n.map((function(e){return Object(O.a)(Object(O.a)({},e),{},Object(f.a)({},e.name,r[e.name]))})),y=function(){var e=Object(j.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,_(r.username),e.next=5,h("");case 5:c.push("/room/".concat(r.room)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),x(e.t0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)("div",{className:ae.a.container,children:[Object(N.jsx)("h1",{className:ae.a.header,children:t}),Object(N.jsx)(q,{inputs:C,handleChange:s,handleSubmit:y,clearInput:l}),Object(N.jsx)(z,{error:g})]})},oe=n(52),re=n.n(oe),se=function(){return Object(N.jsxs)("div",{className:re.a.container,children:[Object(N.jsx)("section",{className:re.a.header__container,children:Object(N.jsx)(te,{mainHeader:"Connect with peers instantly!",subHeader:"Join peer-to-peer connected rooms where you can: ",cycle:!0})}),Object(N.jsxs)("section",{className:"".concat(re.a.forms),children:[Object(N.jsx)(Q,{header:"Create Room",inputs:F}),Object(N.jsx)(ce,{header:"Join Room",inputs:M})]})]})},ie=n(53),le=n.n(ie),ue=function(){var e=Object(i.g)(),t=Object(a.useState)(!1),n=Object(u.a)(t,2),c=n[0],o=n[1],r=e.pathname.split("/"),s=r[r.length-1];return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("button",{className:le.a.button,type:"button",onClick:function(){if("clipboard"in navigator)navigator.clipboard.writeText(s).then((function(){o(!0),setTimeout((function(){return o(!1)}),1e3)})).catch((function(e){console.log(e)}));else if(document.queryCommandSupported("copy")){var e=document.getElementById("blank_copy_url");e.style.display="block",e.value=s,e.focus(),e.select(),document.execCommand("copy"),e.style.display="none"}},disabled:c,children:[c?"Copied!":"Copy Room ID",Object(N.jsx)("i",{className:"fas fa-copy ".concat(le.a.copy)})]}),Object(N.jsx)("input",{id:"blank_copy_url",className:le.a.hidden})]})},de=n(41),_e=n.n(de),me=function(e){var t=e.inputs,n=e.clearInput,a=e.handleSubmit,c=e.handleChange,o=e.handleClick,r=e.isEditing,s=e.children,i=e.hidden,l=void 0!==i&&i,u=e.formStyles,d=void 0===u?"":u,_=e.hideButton,m=void 0!==_&&_;return Object(N.jsxs)("form",{className:_e.a[d],onSubmit:a,children:[r?Object(N.jsx)(B,{inputs:t,handleChange:c,clearInput:n,handleSubmit:a}):s,Object(N.jsx)("button",{type:"button",className:"".concat(_e.a.edit," \n          ").concat(r?_e.a["edit--active"]:""," \n          ").concat(l&&!r?_e.a.hidden:"","\n          ").concat(m?_e.a.hidden:"","\n          "),onClick:o,children:r?Object(N.jsx)("i",{className:"far fa-check-circle"}):Object(N.jsx)("i",{className:"fas fa-edit"})})]})},je=[{type:"text",label:"Room Name",name:"room",required:!0,id:"room-1",autoComplete:"on"}],be=[{type:"text",label:"Display Name",name:"username",required:!0,id:"username-1",max:"32",autoComplete:"on"}],he=n(42),fe=n.n(he),Oe=function(e){var t=e.room,n=e.setRoomName,c=e.isHost,o=K({room:t}),r=o.values,s=o.handleChange,i=o.clearInput,l=Object(a.useState)(!1),d=Object(u.a)(l,2),_=d[0],m=d[1],j=Object(a.useState)(t),b=Object(u.a)(j,2),h=b[0],v=b[1],p=je.map((function(e){return Object(O.a)(Object(O.a)({},e),{},Object(f.a)({},e.name,r[e.name]))}));return Object(N.jsxs)("div",{className:fe.a.header,children:[Object(N.jsx)("div",{className:"".concat(fe.a.header__container," ").concat(_?fe.a["header__container--active"]:""),children:c?Object(N.jsx)(me,{inputs:p,handleChange:s,clearInput:i,handleSubmit:function(e){e.preventDefault(),h!==r.room&&(n(r.room),v(r.room)),m(!1)},handleClick:function(){r.room.length||_||m(!0),r.room.length&&(h!==r.room&&(n(r.room),v(r.room)),m(!_))},isEditing:_,children:Object(N.jsx)("h1",{className:fe.a.heading,children:t})}):Object(N.jsx)("h1",{className:fe.a.heading,children:t})}),Object(N.jsx)(ue,{})]})},ve=n(71),pe=n.n(ve),ge=function(e){var t=e.error;return Object(N.jsx)("div",{className:pe.a.error,children:Object(N.jsxs)("p",{className:pe.a.error__message,children:["Error: ",t.type,": ",t.message]})})},xe=n(54),Ce=n.n(xe),Ne=function(){return Object(N.jsxs)("div",{className:Ce.a.container,children:[Object(N.jsx)("h2",{className:Ce.a.message,children:"Connecting to server..."}),Object(N.jsx)("div",{className:Ce.a.loading})]})},ye=n(7),we=n.n(ye),Se=n(108),ke=n.n(Se),Ee=function(e){var t=e.buttonClass,n=e.spanClass,a=e.title,c=e.iconClass,o=e.handleClick,r=e.handleFocus;return Object(N.jsx)("button",{type:"button",className:"".concat(t," ").concat(ke.a.control__button),title:a,onClick:o,onFocus:r,onBlur:r,children:Object(N.jsx)("span",{className:"".concat(n),children:Object(N.jsx)("i",{className:c})})})},Ie=function(e){var t=e.stream,n=e.hasWebcam,c=e.displayName,o=e.gainStreams,r=e.handleMuted,s=e.handleFullScreen,l=e.isFullScreen,d=e.videoWidth,_=Object(i.f)(),m=Object(a.useContext)(y),j=m.setDisplayName,b=m.stream,h=m.setHasWebcam,v=m.shareScreen,p=m.setShareScreen,g=K({volume:(null===o||void 0===o?void 0:o.isHost)?0:1,username:c}),x=g.values,C=g.setValues,w=g.handleChange,S=g.clearInput,k=Object(a.useState)(!!(null===o||void 0===o?void 0:o.isHost)),E=Object(u.a)(k,2),I=E[0],D=E[1],T=Object(a.useState)(!1),R=Object(u.a)(T,2),F=R[0],M=R[1],V=Object(a.useState)(!1),H=Object(u.a)(V,2),B=H[0],L=H[1],U=Object(a.useState)(c),A=Object(u.a)(U,2),W=A[0],P=A[1],q=J("userName"),z=Object(u.a)(q,2)[1],G=Object(a.useState)(!!(null===t||void 0===t?void 0:t.getVideoTracks()[0].enabled)),Z=Object(u.a)(G,2),Q=Z[0],Y=Z[1],X=Object(a.useState)(!!(null===t||void 0===t?void 0:t.getAudioTracks().length)),$=Object(u.a)(X,2),ee=$[0],te=$[1],ne=Object(a.useState)((null===t||void 0===t?void 0:t.id)===(null===b||void 0===b?void 0:b.id)),ae=Object(u.a)(ne,1)[0],ce=Object(a.useState)(!1),oe=Object(u.a)(ce,2),re=oe[0],se=oe[1],ie=be.map((function(e){return Object(O.a)(Object(O.a)({},e),{},Object(f.a)({},e.name,x[e.name]))}));o&&x.volume>=0&&(o.gainNode.gain.value=x.volume),Object(a.useEffect)((function(){x.volume>0&&I&&(D(!1),r()),x.volume<=0&&!I&&(D(!0),r())}),[x.volume,I,r]),Object(a.useEffect)((function(){Y(n?function(e){return!0}:function(e){return!1})}),[n]);var le=function(){x.username.length||B||L(!0),x.username.length&&(W!==x.username&&(z(x.username),j(x.username),P(x.username)),L(!B))},ue=function(){M(!F),se(!re)},de=function(){se(!re)},_e=Math.floor(100*x.volume),je="1.2rem",he="8%";return d<=600&&(je="1rem"),d<=500&&(je="0.95rem",he="10%"),d<=400&&(je="0.9rem"),Object(N.jsxs)("div",{className:we.a.video__tray,style:{width:"".concat(d<=450?"100%":""),"--controls__size":"".concat(je),"--disconnect__width":"".concat(he)},onDoubleClick:function(e){e.stopPropagation()},children:[Object(N.jsx)("div",{className:"".concat(B?we.a["formDisplayName--active"]:we.a.formDisplayName),children:Object(N.jsx)(me,{inputs:ie,handleChange:w,clearInput:S,handleSubmit:function(e){e.preventDefault(),W!==x.username&&(z(x.username),j(x.username),P(x.username)),L(!1)},handleClick:le,isEditing:B,hidden:!0,children:Object(N.jsx)("button",{type:"button",className:"".concat(we.a.displayname," ").concat(ae?"":we.a["displayName--disabled"]),onClick:le,disabled:!ae,children:c||"Silly Goose"})})}),Object(N.jsxs)("div",{className:"".concat(we.a.controls__tray," ").concat(re?we.a["controls__tray--active"]:""),children:[ae?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:we.a.disconnect__container,children:Object(N.jsx)(Ee,{type:"button",buttonClass:"".concat(we.a.disconnect__button," ").concat(we.a.disconnect__button__padding),spanClass:"".concat(we.a.disconnect__inner),title:"Disconnect from call",iconClass:"fas fa-phone-slash ".concat(we.a.controls__icon," ").concat(we.a.disconnect__icon),handleClick:function(){_.push("/")},handleFocus:de})}),Object(N.jsx)(Ee,{buttonClass:"video__button",title:Q?"Stop Video":"Show Video",iconClass:"fas ".concat(we.a.controls__icon," ").concat(Q?"fa-video":"fa-video-slash ".concat(we.a["button--stop"])),handleClick:function(){t.getVideoTracks().length&&(t.getVideoTracks()[0].canvas||(Q?(t.getVideoTracks()[0].enabled=!1,Y(!1),h(!1)):(t.getVideoTracks()[0].enabled=!0,Y(!0),h(!0))))},handleFocus:de}),Object(N.jsx)(Ee,{buttonClass:"mic__button",title:ee?"Mute":"Unmute",iconClass:"fas ".concat(we.a.controls__icon," ").concat(ee?"fa-microphone":"fa-microphone-slash ".concat(we.a["button--stop"])),handleClick:function(){t.getAudioTracks().length&&(ee?(t.getAudioTracks()[0].enabled=!1,te(!1)):(t.getAudioTracks()[0].enabled=!0,te(!0)),r())},handleFocus:de}),Object(N.jsx)(Ee,{buttonClass:"screen__button",title:v?"Stop Screen Share":"Share Screen",iconClass:"fas fa-desktop ".concat(we.a.controls__icon," ").concat(v?we.a["button--stop"]:""),handleClick:function(){p(!v)},handleFocus:de})]}):Object(N.jsxs)("div",{className:"".concat(we.a.volume__controls," ").concat(F?we.a["volume__controls--focus"]:""),children:[Object(N.jsx)("button",{type:"button",className:we.a.volume__button,onClick:function(e){C(I?function(e){return Object(O.a)(Object(O.a)({},e),{},{volume:1})}:function(e){return Object(O.a)(Object(O.a)({},e),{},{volume:0})})},onFocus:de,onBlur:de,children:Object(N.jsx)("i",{className:"fas ".concat(we.a.controls__icon," ").concat(I?"fa-volume-mute":"fa-volume-up"," ").concat(we.a.volume)})}),Object(N.jsx)("input",{className:we.a.slider,type:"range",min:"-0.01",max:"2",step:"0.01",name:"volume",value:x.volume,title:_e,onChange:w,onFocus:ue,onBlur:ue})]}),Object(N.jsx)(Ee,{buttonClass:"fullscreen__button",title:l?"Exit Fullscreen":"Fullscreen",iconClass:"fas ".concat(we.a.controls__icon," ").concat(l?"fa-compress":"fa-expand"),handleClick:s,handleFocus:de})]})]})},De=n(51),Te=n(109),Re=n(110),Fe=n.n(Re),Me=function(e){var t=e.seed,n=Object(De.createAvatar)(Te,{seed:t,dataUri:!0});return Object(N.jsx)("img",{className:Fe.a.identicon,src:n,alt:"identicon"})},Ve=n(33),He=n.n(Ve),Be=function(e){var t=e.stream,n=e.displayName,c=e.isTalking,o=e.gainStreams,r=e.hasWebcam,s=e.containerStyles,i=Object(a.useRef)(t),l=Object(a.useRef)(null),d=Object(a.useRef)(null),_=Object(a.useState)(!1),m=Object(u.a)(_,2),j=m[0],b=m[1],h=Object(a.useState)(!1),f=Object(u.a)(h,2),O=f[0],v=f[1];Object(a.useEffect)((function(){i.current&&(i.current.srcObject=t)}),[i,t,r]),Object(a.useEffect)((function(){return document.addEventListener("fullscreenchange",g,!1),document.addEventListener("mozfullscreenchange",g,!1),document.addEventListener("MSFullscreenChange",g,!1),document.addEventListener("webkitfullscreenchange",g,!1),function(){document.removeEventListener("fullscreenchange",g,!1),document.removeEventListener("mozfullscreenchange",g,!1),document.removeEventListener("MSFullscreenChange",g,!1),document.removeEventListener("webkitfullscreenchange",g,!1)}}),[]);var p=function(){var e=l.current,t=window.document,n=e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen||e.msRequestFullscreen,a=t.exitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen||t.msExitFullscreen;t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.msFullscreenElement?(a.call(t),v(!1)):(n.call(e),v(!0))},g=function(){var e=window.document;e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement||v(!1)},x=d.current?window.getComputedStyle(d.current):"0px";return Object(N.jsx)("div",{ref:d,className:"".concat(He.a.container," ").concat(j?He.a.muted:""," ").concat(c?He.a.speaking:He.a.silent),style:{width:"calc(".concat(s.width,"px - (").concat(x.marginLeft," + ").concat(x.marginRight,"))"),height:"calc(".concat(s.height,"px - (").concat(x.marginTop," + ").concat(x.marginBottom,"))")},children:Object(N.jsxs)("div",{className:He.a.wrapper,ref:l,onDoubleClick:p,children:[r?Object(N.jsx)("video",{id:t.id,className:"".concat(He.a.video," ").concat(O?He.a["video--fullscreen"]:""),playsInline:!0,ref:i,autoPlay:!0,muted:!0,"data-video-stream":"video-stream"}):Object(N.jsx)("div",{id:t.id,className:He.a.identicon__container,"data-video-stream":"video-stream",children:Object(N.jsx)(Me,{seed:t.id})}),Object(N.jsx)(Ie,{stream:t,hasWebcam:r,displayName:n,gainStreams:o,handleMuted:function(){b(!j)},handleFullScreen:p,isFullScreen:O,videoWidth:s.width})]})})},Le=n(46),Ue=n.n(Le),Ae=function(e){var t=e.videos,n=e.isTalking,c=e.gainStreams,o=e.hasPeerError,r=e.hasSocketError,s=Object(a.useState)({}),i=Object(u.a)(s,2),l=i[0],d=i[1],_=Object(a.useContext)(E),m=_.isChatOpen,j=_.chatDimensions,b=Object(a.useRef)(null);Object(a.useEffect)((function(){var e=function(){var e=0,n=0;b.current&&(e=Math.floor(b.current.getBoundingClientRect().top+window.pageYOffset)+15),m&&(n=j.width);var a=function(e,t,n,a){for(var c={area:0,cols:0,rows:0,width:0,height:0},o=1;o<=n;o++){var r=Math.ceil(n/o),s=void 0,i=void 0;e/(o*a)<=t/r?(s=Math.floor(e/o),i=Math.floor(s/a)):(i=Math.floor(t/r),s=Math.floor(i*a));var l=s*i;l>c.area&&(c={area:l,width:s,height:i,rows:r,cols:o})}return c}(document.body.getBoundingClientRect().width-n,window.innerHeight-e,Object.keys(t).length,16/9),c=a.width,o=a.height,r=a.cols;d((function(e){return Object(O.a)(Object(O.a)({},e),{},{width:c,height:o,cols:r})}))};return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}}),[t,m,j]);return r?Object(N.jsx)("div",{className:Ue.a.error,children:Object(N.jsx)(ge,{error:r})}):o?Object(N.jsx)("div",{className:Ue.a.error,children:Object(N.jsx)(ge,{error:o})}):Object.keys(t).length?Object(N.jsx)("div",{ref:b,className:Ue.a.videos,style:{maxWidth:"calc(".concat(l.width,"px * ").concat(l.cols,")")},children:Object.values(t).map((function(e,t){return Object(N.jsx)(Be,{stream:e.streamID,displayName:e.displayName,isTalking:null===n||void 0===n?void 0:n[e.streamID.id],gainStreams:null===c||void 0===c?void 0:c[e.streamID.id],hasWebcam:e.hasWebcam,containerStyles:l},t)}))}):Object(N.jsx)("div",{className:Ue.a.loading,children:Object(N.jsx)(Ne,{})})},We=n(55),Pe=n.n(We),qe=function(){var e=Object(a.useContext)(y),t=e.users,n=e.roomName,c=Object.keys(t).length;return Object(N.jsxs)("div",{className:Pe.a.container,children:[Object(N.jsx)("h2",{className:Pe.a.chat__header,children:n}),Object(N.jsxs)("p",{className:Pe.a.chat__online,children:["Currently Online: ",c]})]})},ze=n(198),Ke=n(56),Je=n.n(Ke),Ge=function(e){var t=e.username,n=e.timestamp,a=Object(ze.a)(n,"h:mm bbb");return Object(N.jsxs)("div",{className:Je.a.container,children:[Object(N.jsx)("h3",{className:Je.a.header,children:t}),Object(N.jsx)("p",{className:Je.a.timestamp,children:a})]})},Ze=n(111),Qe=n.n(Ze),Ye=n(21),Xe=n.n(Ye),$e=function(e){var t,n=e.message,c=e.ogMeta,o=Object(a.useState)(!1),r=Object(u.a)(o,2),s=r[0],i=r[1],l=Object(a.useState)(""),_=Object(u.a)(l,2),m=_[0],j=_[1];Object(a.useEffect)((function(){n.length&&function(){var e=null,t=null;void 0===n&&""===n||(e=/^(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/);var a,c=n.replace(/\n/g," ").split(" "),o=Object(d.a)(c);try{for(o.s();!(a=o.n()).done;)if((t=a.value.match(e))&&11===t[1].length)return i(!0),void j(t[1])}catch(r){o.e(r)}finally{o.f()}}()}),[n]);return Object(N.jsxs)("div",{className:Xe.a.container,children:[Object(N.jsx)("p",{className:Xe.a.message,children:function(){var e=n.replace(/\n/g," ").split(" ").filter((function(e){return Qe()(e,{require_protocol:!0})}));if(!e.length)return n;for(var t=[],a=0,c=0,o=0,r=null,s=0;s<e.length;s++)a=n.substring(o).indexOf(e[s])+o,o=n.slice(c,a),r={link:e[s]},t.push(o,r),c=a+e[s].length,o=a+e[s].length;return t.push(n.slice(c)),t.map((function(e,t){return"string"===typeof e?Object(N.jsx)("span",{children:e},t):Object(N.jsx)("a",{href:e.link,className:Xe.a.link,target:"_blank",rel:"noopener noreferrer",children:e.link},t)}))}()}),s&&Object(N.jsx)("div",{className:Xe.a.iframe__container,children:Object(N.jsx)("iframe",{className:"embedded__video ".concat(Xe.a.iframe),title:"video",type:"text/html",frameBorder:"0",height:"200",allowFullScreen:!0,src:"https://www.youtube.com/embed/".concat(m,"?autoplay=0&enablejsapi=1&rel=0&version=3")})}),!s&&c.success&&Object(N.jsx)("div",{className:Xe.a.ogCard__container,children:Object(N.jsxs)("a",{href:c.requestUrl,className:Xe.a.ogCard__link,target:"_blank",rel:"noopener noreferrer",children:[Object(N.jsx)("div",{className:"".concat(Xe.a.ogCard__image__container," ").concat(c.ogImage?"":Xe.a.hidden),children:Object(N.jsx)("img",{src:null===(t=c.ogImage)||void 0===t?void 0:t.url,alt:c.ogTitle,className:Xe.a.ogCard__image})}),Object(N.jsx)("div",{className:Xe.a.ogCard__description__container,children:Object(N.jsx)("p",{className:Xe.a.ogCard__description,children:c.ogTitle})})]})})]})},et=n(47),tt=n.n(et),nt=function(e){var t=e.messageData;return Object(N.jsxs)("div",{className:tt.a.container,children:[Object(N.jsxs)("div",{className:tt.a.message__header,children:[Object(N.jsx)("div",{className:tt.a.identicon,children:Object(N.jsx)(Me,{seed:t.streamID})}),Object(N.jsx)(Ge,{username:t.userName,timestamp:t.createdAt})]}),Object(N.jsx)("div",{className:tt.a.message,children:t.message.map((function(e,n){return Object(N.jsx)($e,{message:e,ogMeta:t.ogMeta[n]},t.id[n])}))})]})},at=n(48),ct=n.n(at),ot=function(){var e,t=Object(a.useContext)(E),n=t.messageList,c=t.isAtTop,o=t.setIsAtTop,r=t.hasOlderMessages,s=t.hasInitMessages,i=Object(a.useRef)(null),u=Object(a.useRef)(null),d=null===(e=i.current)||void 0===e?void 0:e.scrollHeight;Object(a.useEffect)((function(){!function(){if(i.current){var e,t=i.current.scrollTop,a=i.current.scrollHeight,l=i.current.clientHeight;if(a===l&&s&&!c&&r)o(!0);else if(n.length&&r&&(i.current.scrollTop=a-d),a-t<=l+125&&a!==l)null===(e=u.current)||void 0===e||e.scrollIntoView()}}()}),[n,c,d,r,o,s]),Object(a.useEffect)((function(){var e=null,t=function(){0===i.current.scrollTop&&n.length&&r?o((function(e){return!0})):o(!1)};return i.current&&(i.current.addEventListener("scroll",t),e=i.current),function(){e&&e.removeEventListener("scroll",t)}}),[n,r,o]);return Object(N.jsxs)("div",{ref:i,className:ct.a.container,children:[Object(N.jsx)("div",{className:ct.a.header,children:r?Object(N.jsx)("div",{className:c?ct.a.loading:""}):Object(N.jsx)("p",{className:ct.a.welcome__message,children:"Welcome to the Chat Room!"})}),function(e){if(!e.length)return[];var t=e.map((function(e){return Object(O.a)({},e)})),n=[],a=t[0];a.message=[a.message],a.id=[a.id],a.ogMeta=[a.ogMeta];for(var c=1;c<t.length;c++)Array.isArray(a.message)||(a.message=[a.message]),t[c].streamID===a.streamID?(a.message=[].concat(Object(l.a)(a.message),[t[c].message]),a.id=[].concat(Object(l.a)(a.id),[t[c].id]),a.ogMeta=[].concat(Object(l.a)(a.ogMeta),[t[c].ogMeta])):(n.push(a),(a=t[c]).message=[a.message],a.id=[a.id],a.ogMeta=[a.ogMeta]);return n.push(a),n}(n).map((function(e){return Object(N.jsx)(nt,{messageData:e},e.id[0])})),Object(N.jsx)("div",{ref:u})]})},rt=[{label:"Send message...",name:"message",required:!0,id:"message-1",autoComplete:"off",formType:"textarea"}],st=["blush","smile","joy","rolling_on_the_floor_laughing","heart_eyes","sweat_smile","kissing_heart","smiling_face_with_3_hearts","smiley","relaxed","hugging_face"],it=n(57),lt=(n(193),n(30)),ut=n.n(lt),dt=function(){var e=K({message:""}),t=e.values,n=e.handleChange,c=e.handleAdd,o=e.clearInput,r=Object(a.useState)(!1),s=Object(u.a)(r,2),i=s[0],l=s[1],_=Object(a.useState)("blush"),m=Object(u.a)(_,2),j=m[0],b=m[1],h=Object(a.useState)(!1),v=Object(u.a)(h,2),p=v[0],g=v[1],x=Object(a.useContext)(E).setMessage,C=Object(a.useRef)(!1),y=Object(a.useRef)(null),w=rt.map((function(e){return Object(O.a)(Object(O.a)({},e),{},Object(f.a)({},e.name,t[e.name]))}));Object(a.useEffect)((function(){C.current?C.current=!1:function(e){if(e.length){var t,a=e.split(" "),c=[],o=Object(d.a)(a);try{var r=function(){var e=t.value;if(":"!==e[0])return c.push(e),"continue";var n,a=":"===e[e.length-1]&&e.length>1;a&&(e=e.replaceAll(":","")),(n=it.c.search(e).filter((function(t){if(!a&&t.emoticons.length){var n,c=Object(d.a)(t.emoticons);try{for(c.s();!(n=c.n()).done;)if(n.value===e)return t.native}catch(o){c.e(o)}finally{c.f()}}return e===t.id&&t.native}))).length?c.push(n[0].native):c.push(e)};for(o.s();!(t=o.n()).done;)r()}catch(l){o.e(l)}finally{o.f()}var s=c.join(" ");if(s!==e){var i={target:{value:s,name:"message"}};C.current=!0,n(i)}}}(t.message)}),[t,n]),Object(a.useEffect)((function(){return i?window.addEventListener("mousedown",S):window.removeEventListener("mousedown",S),function(){window.removeEventListener("mousedown",S)}}),[i]);var S=function(e){y.current.contains(e.target)||l(!1)},k=function(){t.message.length&&(x(t.message),o("message"),g(!0),setTimeout((function(){g(!1)}),900))};return Object(N.jsxs)("div",{className:ut.a.container,children:[Object(N.jsx)("div",{className:ut.a.input__container,children:Object(N.jsx)(me,{inputs:w,handleChange:n,clearInput:o,handleSubmit:function(e){e.preventDefault(),k()},isEditing:!0,hideButton:!0})}),Object(N.jsxs)("div",{className:ut.a.controls__container,children:[Object(N.jsxs)("div",{ref:y,className:ut.a.emoji__container,children:[Object(N.jsx)("button",{type:"button",title:"Pick your emoji...",className:ut.a.emoji__button,onClick:function(){l(!i)},onMouseOver:function(){for(var e=st[Math.floor(Math.random()*st.length)];e===j;)e=st[Math.floor(Math.random()*st.length)];b(e)},children:Object(N.jsx)(it.a,{emoji:j,size:18,native:!0})}),i&&Object(N.jsx)("div",{className:ut.a.emoji__mart,children:Object(N.jsx)(it.b,{title:"Pick your emoji...",onSelect:function(e){var t={target:{value:e.native,name:"message"}};c(t)},emoji:"wave",native:!0})})]}),Object(N.jsx)("button",{type:"button",className:"".concat(ut.a.send__button),onClick:k,children:Object(N.jsx)("i",{className:"fas fa-play ".concat(ut.a.send__icon," ").concat(p?ut.a["send__button--active"]:"")})})]})]})},_t=n(112),mt=n.n(_t),jt=function(){return Object(N.jsxs)("div",{className:mt.a.container,children:[Object(N.jsx)(qe,{}),Object(N.jsx)(ot,{}),Object(N.jsx)(dt,{})]})},bt=n(26),ht=n.n(bt),ft=function(){var e=Object(a.useContext)(E),t=e.isChatOpen,n=e.setIsChatOpen,c=e.chatDimensions,o=e.setChatDimensions,r=Object(a.useRef)(null);Object(a.useEffect)((function(){var e=function(){var e,t=null===(e=r.current.getBoundingClientRect())||void 0===e?void 0:e.width;t!==c.width&&o((function(e){return Object(O.a)(Object(O.a)({},e),{},{width:t})}))};return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}}),[c,o]),Object(a.useEffect)((function(){t||s()}),[t]);var s=function(){var e=document.querySelectorAll(".embedded__video");e.length&&e.forEach((function(e){e.contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}',"*")}))};return Object(N.jsxs)("div",{ref:r,className:"".concat(ht.a.container," ").concat(t?ht.a["container--on"]:""),children:[Object(N.jsxs)("button",{type:"button",className:ht.a.chat__button,onClick:function(){n(!t)},children:[Object(N.jsx)("i",{className:"fas fa-chevron-left ".concat(ht.a.chevron," ").concat(t?ht.a["chevron--open"]:ht.a.hidden)}),Object(N.jsx)("i",{className:"fas fa-chevron-right ".concat(ht.a.chevron," ").concat(t?ht.a.hidden:ht.a["chevron--closed"])})]}),Object(N.jsx)("div",{className:"".concat(ht.a.chat__container," ").concat(t?"":ht.a["chat__container--closed"]),children:Object(N.jsx)(jt,{})})]})},Ot=n(113),vt=n.n(Ot),pt=function(){var e=Object(a.useContext)(y),t=e.isHost,n=e.setParams,c=e.setDisplayName,o=e.roomName,r=e.setRoomName,s=e.videoStreams,l=e.isTalking,d=e.gainStreams,_=e.hasPeerError,m=e.hasSocketError,j=Object(a.useContext)(E),b=j.isChatOpen,h=j.chatDimensions,f=Object(i.g)(),O=J("userName"),v=Object(u.a)(O,1)[0],p=J("roomName"),g=Object(u.a)(p,2),x=g[0],C=g[1],w=f.pathname.split("/"),S=w[w.length-1];return Object(a.useEffect)((function(){c(v),r(x)}),[v,c,x,r]),Object(a.useEffect)((function(){return n(S),function(){n("")}}),[n,S,f]),Object(N.jsxs)("div",{className:vt.a.container,style:{paddingRight:b?h.width:0},children:[Object(N.jsx)(Oe,{room:o||x,setRoomName:C,isHost:t}),Object(N.jsx)(Ae,{videos:s,isTalking:l,gainStreams:d,hasPeerError:_,hasSocketError:m}),Object(N.jsx)(ft,{})]})},gt=(n(194),function(){return Object(N.jsxs)(s.a,{children:[Object(N.jsx)(R,{}),Object(N.jsx)("div",{style:{height:"70px"}}),Object(N.jsxs)(i.c,{children:[Object(N.jsx)(i.a,{path:"/",exact:!0,component:se}),Object(N.jsx)(i.a,{path:"/room/:id",component:pt})]})]})});r.a.render(Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsx)(k,{children:Object(N.jsx)(I,{children:Object(N.jsx)(gt,{})})})}),document.getElementById("root"))},21:function(e,t,n){e.exports={container:"ChatUserMessage_container__1WJit",message:"ChatUserMessage_message__BVE9a",link:"ChatUserMessage_link__1weps",iframe__container:"ChatUserMessage_iframe__container__25goN",ogCard__container:"ChatUserMessage_ogCard__container__EPmr5",ogCard__link:"ChatUserMessage_ogCard__link__2_oqD",ogCard__description__container:"ChatUserMessage_ogCard__description__container__lV1k7",ogCard__image:"ChatUserMessage_ogCard__image__9cvqH",ogCard__image__container:"ChatUserMessage_ogCard__image__container__2HUtk",ogCard__description:"ChatUserMessage_ogCard__description__2tbER",hidden:"ChatUserMessage_hidden__qtKe8"}},25:function(e,t,n){e.exports={container__input:"FormInputs_container__input__1QS_7",input:"FormInputs_input__8Dn1T",label:"FormInputs_label__P9l6v",textarea:"FormInputs_textarea__2194B",input__options:"FormInputs_input__options__gr_jY","input__options--active":"FormInputs_input__options--active__22_4C",clear:"FormInputs_clear__3INjI",paste:"FormInputs_paste__psKZv",move__scrollbar:"FormInputs_move__scrollbar__1GLxC"}},26:function(e,t,n){e.exports={container:"ChatContainer_container__1Mk_Q","container--on":"ChatContainer_container--on__FDfzR",chat__container:"ChatContainer_chat__container__wrEdU","chat__container--closed":"ChatContainer_chat__container--closed__2LfQy",chat__button:"ChatContainer_chat__button__3GTyN",chevron:"ChatContainer_chevron__1RrBs","chevron--open":"ChatContainer_chevron--open__k0_um",rotateChevron:"ChatContainer_rotateChevron__K13ud","chevron--closed":"ChatContainer_chevron--closed__2Y_c9",clickMe:"ChatContainer_clickMe__18yfl",hidden:"ChatContainer_hidden___mWPU"}},30:function(e,t,n){e.exports={container:"ChatInput_container__3nd26",input__container:"ChatInput_input__container__2FSOS",controls__container:"ChatInput_controls__container__1LUiC",emoji__container:"ChatInput_emoji__container__GjUow",emoji__button:"ChatInput_emoji__button__25bIN",emoji__mart:"ChatInput_emoji__mart__2t9BR",send__button:"ChatInput_send__button__wxh4H","send__button--active":"ChatInput_send__button--active__2ZlHj",sent:"ChatInput_sent__1Us3o"}},33:function(e,t,n){e.exports={container:"Video_container__2m10r",speaking:"Video_speaking__3bK5y",muted:"Video_muted__3jDAv",wrapper:"Video_wrapper__iL1j5",video:"Video_video__1hg4k","video--fullscreen":"Video_video--fullscreen__12fAr",identicon__container:"Video_identicon__container__yplsP"}},37:function(e,t,n){e.exports={container:"HomeHeader_container__Wrv0t",main__header:"HomeHeader_main__header__1SH44",sub__header:"HomeHeader_sub__header__1JEOk",popIn:"HomeHeader_popIn__HIZ_-",cycled__word:"HomeHeader_cycled__word__2gnij",cycleFadeDown:"HomeHeader_cycleFadeDown__24l6n","cycled__word--stop":"HomeHeader_cycled__word--stop__1tGzb",fadeDown:"HomeHeader_fadeDown__2F6VE"}},41:function(e,t,n){e.exports={edit:"EditWrapper_edit__q6ooH","edit--active":"EditWrapper_edit--active__1saV1",hidden:"EditWrapper_hidden__1kMsW"}},42:function(e,t,n){e.exports={header:"VideoRoomHeader_header___ukT-",header__container:"VideoRoomHeader_header__container__3ODs3","header__container--active":"VideoRoomHeader_header__container--active__3jRZJ",heading:"VideoRoomHeader_heading__2VE50"}},46:function(e,t,n){e.exports={videos:"VideosContainer_videos__31vVT",error:"VideosContainer_error__piWun",loading:"VideosContainer_loading__DaLvf"}},47:function(e,t,n){e.exports={container:"ChatUser_container__WnbYy",identicon:"ChatUser_identicon__3cbnm",message__header:"ChatUser_message__header__2RvSv",message:"ChatUser_message__Ff-QO"}},48:function(e,t,n){e.exports={container:"ChatMessages_container__1PA_J",header:"ChatMessages_header__1jKAF",welcome__message:"ChatMessages_welcome__message__11SFS",loading:"ChatMessages_loading__23GSl",spinner:"ChatMessages_spinner__1J03K"}},52:function(e,t,n){e.exports={container:"HomeContainer_container__2OWO0",hideOverflow:"HomeContainer_hideOverflow__Laf0D",header__container:"HomeContainer_header__container__2Coir",fadeDown:"HomeContainer_fadeDown__1l1O3",forms:"HomeContainer_forms__3R434",fadeUp:"HomeContainer_fadeUp__1jQWR"}},53:function(e,t,n){e.exports={button:"CopyButton_button__33FwW",copy:"CopyButton_copy__1EtQe",hidden:"CopyButton_hidden__3t-ys"}},54:function(e,t,n){e.exports={container:"Loading_container__1vnCb",message:"Loading_message__17BS-",loading:"Loading_loading__2vOqd",spinner:"Loading_spinner__BtxRW"}},55:function(e,t,n){e.exports={container:"ChatHeader_container__ki7qG",chat__header:"ChatHeader_chat__header__12SkO",chat__online:"ChatHeader_chat__online__3-dkL"}},56:function(e,t,n){e.exports={container:"ChatUserHeader_container__3Vmuc",header:"ChatUserHeader_header__1ovbY"}},6:function(e,t,n){e.exports={nav:"NavBar_nav__3f64e",container:"NavBar_container__1gjCp",logo__container:"NavBar_logo__container__u7Q9A",logo:"NavBar_logo__3Ggka",underline:"NavBar_underline__25kKw",hamburger:"NavBar_hamburger__1fhMF",line:"NavBar_line__1Py63",line__one:"NavBar_line__one__3HY3Z",line__two:"NavBar_line__two__38xtl",line__three:"NavBar_line__three__zoKee","line__one--open":"NavBar_line__one--open__rP7u5",lineOneOpen:"NavBar_lineOneOpen__iLHEk","line__two--open":"NavBar_line__two--open__1DcaF",lineTwoOpen:"NavBar_lineTwoOpen__1FDWm","line__three--open":"NavBar_line__three--open__91RHN",lineThreeOpen:"NavBar_lineThreeOpen__2yT8j","line__one--closed":"NavBar_line__one--closed__1YY7k","line__two--closed":"NavBar_line__two--closed__1Vakl","line__three--closed":"NavBar_line__three--closed__3jOE3",hidden:"NavBar_hidden__3pdTF"}},69:function(e,t,n){e.exports={container:"CreateRoom_container__3jjQr",header:"CreateRoom_header__2fA2z"}},7:function(e,t,n){e.exports={video__tray:"VideoControls_video__tray__1jfET",formDisplayName:"VideoControls_formDisplayName__MSjh6","formDisplayName--active":"VideoControls_formDisplayName--active__2UdrF",displayname:"VideoControls_displayname__3Z2J6","displayName--disabled":"VideoControls_displayName--disabled__UhKWK",controls__tray:"VideoControls_controls__tray__1I-aI","controls__tray--active":"VideoControls_controls__tray--active__1OuEI",disconnect__container:"VideoControls_disconnect__container__2bZJX",disconnect__button:"VideoControls_disconnect__button__3P_eV",disconnect__button__padding:"VideoControls_disconnect__button__padding__1KWkr",disconnect__inner:"VideoControls_disconnect__inner__1AtOI","button--stop":"VideoControls_button--stop__14Sq_",volume__controls:"VideoControls_volume__controls__2BPI1","volume__controls--focus":"VideoControls_volume__controls--focus__1bBfB",slider:"VideoControls_slider__2uUhy",volume__button:"VideoControls_volume__button__tHp-0",volume:"VideoControls_volume__XOgz7",controls__icon:"VideoControls_controls__icon__1PGqM",hidden:"VideoControls_hidden__t-zo-"}},70:function(e,t,n){e.exports={container:"JoinRoom_container__1yJmR",header:"JoinRoom_header__3U2fw"}},71:function(e,t,n){e.exports={error:"ErrorDisplay_error__2hZXS",error__message:"ErrorDisplay_error__message__1mabM"}}},[[195,1,2]]]);
//# sourceMappingURL=main.20d6e4fb.chunk.js.map