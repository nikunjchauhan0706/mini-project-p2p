{"version":3,"sources":["components/SubmitButton/SubmitButton.module.css","components/RoomForm/RoomForm.module.css","components/VideoControlsButton/VideoControlsButton.module.css","components/Identicon/Identicon.module.css","components/ChatList/ChatList.module.css","components/RoomContainer/RoomContainer.module.css","../node_modules/peerjs/dist sync","context/SocketContext.js","context/ChatContext.js","components/NavBar/NavBar.js","data/homeInputs.js","components/FormInputs/FormInputs.js","components/SubmitButton/SubmitButton.js","components/RoomForm/RoomForm.js","components/ErrorMessage/ErrorMessage.js","hooks/useForm.js","hooks/useStateToLocalStorage.js","components/CreateRoom/CreateRoom.js","data/homeHeader.js","components/HomeHeader/HomeHeader.js","components/JoinRoom/JoinRoom.js","components/HomeContainer/HomeContainer.js","components/CopyButton/CopyButton.js","components/EditWrapper/EditWrapper.js","data/roomInputs.js","components/VideoRoomHeader/VideoRoomHeader.js","components/ErrorDisplay/ErrorDisplay.js","components/Loading/Loading.js","components/VideoControlsButton/VideoControlsButton.js","components/VideoControls/VideoControls.js","components/Identicon/Identicon.js","components/Video/Video.js","components/VideosContainer/VideosContainer.js","components/ChatHeader/ChatHeader.js","components/ChatUserHeader/ChatUserHeader.js","components/ChatUserMessage/ChatUserMessage.js","components/ChatUser/ChatUser.js","components/ChatMessages/ChatMessages.js","data/messageInputs.js","data/emojiTrayMap.js","components/ChatInput/ChatInput.js","components/ChatList/ChatList.js","components/ChatContainer/ChatContainer.js","components/RoomContainer/RoomContainer.js","components/App.js","index.js","components/ChatUserMessage/ChatUserMessage.module.css","components/FormInputs/FormInputs.module.css","components/ChatContainer/ChatContainer.module.css","components/ChatInput/ChatInput.module.css","components/Video/Video.module.css","components/HomeHeader/HomeHeader.module.css","components/EditWrapper/EditWrapper.module.css","components/VideoRoomHeader/VideoRoomHeader.module.css","components/VideosContainer/VideosContainer.module.css","components/ChatUser/ChatUser.module.css","components/ChatMessages/ChatMessages.module.css","components/HomeContainer/HomeContainer.module.css","components/CopyButton/CopyButton.module.css","components/Loading/Loading.module.css","components/ChatHeader/ChatHeader.module.css","components/ChatUserHeader/ChatUserHeader.module.css","components/NavBar/NavBar.module.css","components/CreateRoom/CreateRoom.module.css","components/VideoControls/VideoControls.module.css","components/JoinRoom/JoinRoom.module.css","components/ErrorDisplay/ErrorDisplay.module.css"],"names":["module","exports","webpackEmptyContext","req","e","Error","code","keys","resolve","id","SocketContext","createContext","socket","peer","SocketContextProvider","children","useState","params","setParams","stream","setStream","hasWebcam","setHasWebcam","shareScreen","setShareScreen","isHost","setIsHost","videoStreams","setVideoStreams","peers","setPeers","users","setUsers","displayName","setDisplayName","roomName","setRoomName","isTalking","setIsTalking","gainStreams","setGainStreams","hasPeerError","setPeerError","hasSocketError","setSocketError","videoRefs","useRef","peersRefs","usersRefs","displayNameRef","roomNameRef","shareScreenRef","useEffect","Object","length","current","newVideos","entries","find","video","changeDisplayName","emit","changeWebcamStatus","navigator","mediaDevices","getDisplayMedia","then","currentStream","getVideoTracks","addEventListener","replaceVideoStream","catch","console","log","getUserMedia","width","min","height","fakeVideo","getStream","audio","setUserConnection","setPeerListeners","harkListeners","setUpVolumeControl","streamID","hark","fakeAudio","addTrack","on","userID","connectToNewUser","call","close","rest","userList","oldID","newUser","peerStreamID","callStreamID","newUsers","callList","answer","userVideoStream","addVideo","removeVideo","offerToReceiveAudio","offerToReceiveVideo","newUserStream","_remoteStream","audioCtx","window","AudioContext","webkitAudioContext","source","createMediaStreamSource","gainNode","createGain","streams","connect","destination","options","threshold","audioContext","speechEvents","state","resume","speechListeners","io","process","REACT_APP_SOCKET_HOST","reconnection","room","bool","Peer","disconnected","destroyed","reconnect","removeAllListeners","prevStream","getTracks","forEach","track","stop","values","destroy","a","Promise","setTimeout","prom","key","active","isTrack","removeTrack","_connections","value","peerConnection","getSenders","connection","kind","replaceTrack","videos","canvas","assign","document","createElement","getContext","fillRect","captureStream","enabled","createMediaStreamDestination","MediaStream","Provider","ChatContext","ChatContextProvider","isChatOpen","setIsChatOpen","chatDimensions","setChatDimensions","message","setMessage","isAtTop","setIsAtTop","hasOlderMessages","setHasOlderMessages","messageList","setMessageList","hasInitMessages","setHasInitMessages","useContext","handleJoinedRoom","messageObj","createdAt","Date","getTime","userName","ogMeta","handleMessageReceived","handleUpdatedMessage","handleOlderMessagesReceived","handleMessagesList","handleAllOlderMessagesReceived","removeListener","messages","msgs","map","msg","hasMessages","hasMsgs","NavBar","handleClick","c","className","styles","nav","container","logo__container","to","logo","underline","hamburger","hidden","onClick","onKeyDown","keyCode","tabIndex","line","line__one","line__two","line__three","createInputs","type","label","name","required","max","autoComplete","joinInputs","FormInputs","inputs","handleChange","clearInput","handleSubmit","isFocused","setFocused","currentFocus","setCurrentFocus","textAreaHeight","setTextAreaHeight","textAreaRefs","createRef","clipboard","readText","text","target","getElementById","focus","execCommand","handleFocus","split","handleBlur","textAreaResize","textArea","style","scrollHeight","textAreaRefsValue","handleEnterPress","shiftKey","removeEventListener","input","i","formInput","formType","textarea","placeholder","onChange","ref","maxLength","Fragment","htmlFor","container__input","input__options","move__scrollbar","clear","onFocus","onBlur","paste","SubmitButton","button","RoomForm","onSubmit","ErrorMessage","error","useForm","init","setValues","initValues","join","handleAdd","resetForm","clearForm","newValues","useStateToLocalStorage","localStorage","getItem","setValue","setItem","CreateRoom","header","history","useHistory","username","setUsername","fetchError","setFetchError","formInputs","preventDefault","fetch","res","json","uuid","push","cycledWordsList","HomeHeader","mainHeader","subHeader","cycle","count","setCount","cycledWord","setCycledWord","cycledRef","cycledRefValue","handleCycle","main__header","sub__header","cycled__word","uuidv4","JoinRoom","HomeContainer","header__container","forms","CopyButton","location","useLocation","copied","setCopied","searchParams","pathname","roomID","writeText","err","queryCommandSupported","tmp","display","select","disabled","copy","EditWrapper","isEditing","formStyles","hideButton","edit","roomInput","nameInput","VideoRoomHeader","setIsEditing","lastRoomName","setLastRoomName","heading","ErrorDisplay","error__message","Loading","loading","VideoControlsButton","buttonClass","spanClass","title","iconClass","control__button","VideoControls","handleMuted","handleFullScreen","isFullScreen","videoWidth","myStream","volume","isMuted","setMuted","isVolumeFocused","setVolumeFocused","lastName","setLastName","setUserName","playVideo","setPlayVideo","getAudioTracks","playMic","setPlayMic","isMyStream","setIsFocused","gain","p","handleNameClick","handleControlsFocus","volumeTitle","Math","floor","controlsSize","disconnectWidth","video__tray","onDoubleClick","stopPropagation","formDisplayName","displayname","controls__tray","disconnect__container","disconnect__button","disconnect__button__padding","disconnect__inner","controls__icon","disconnect__icon","volume__controls","volume__button","slider","step","Identicon","seed","identicon","createAvatar","avatarStyle","dataUri","src","alt","Video","containerStyles","wrapperRef","containerRef","setIsMuted","setIsFullScreen","srcObject","handleFullScreenExit","element","doc","requestFullScreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullScreen","msRequestFullscreen","cancelFullScreen","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","contianerMarginStyles","getComputedStyle","muted","speaking","silent","marginLeft","marginRight","marginTop","marginBottom","wrapper","playsInline","autoPlay","data-video-stream","identicon__container","VideoContainer","setContainerStyles","recalculateLayout","elFromTop","chatWidth","getBoundingClientRect","top","pageYOffset","containerWidth","containerHeight","videoCount","aspectRatio","bestLayout","area","cols","rows","ceil","calculateLayout","body","innerHeight","maxWidth","ChatHeader","totalOnline","chat__header","chat__online","ChatUserHeader","timestamp","formattedTimestamp","format","ChatUserMessage","hasURL","setHasURL","srcURL","setSrcURL","regExp","match","undefined","replace","checkMessagesForURL","linksArray","filter","isURL","require_protocol","finalMessageArray","linkIndex","startIndex","beginningString","link","substring","indexOf","slice","href","rel","handleStringToURL","iframe__container","iframe","frameBorder","allowFullScreen","success","ogCard__container","requestUrl","ogCard__link","ogCard__image__container","ogImage","url","ogTitle","ogCard__image","ogCard__description__container","ogCard__description","ChatUser","messageData","message__header","ChatMessages","bottomMessagesRef","lastScrollHeight","scrollTop","clientHeight","scrollIntoView","newMessageScroll","containerRefValue","handleScroll","prev","welcome__message","messagesData","obj","newMessages","currentUser","Array","isArray","combineMessages","messageInputs","emojiTrayMap","ChatInput","showEmojis","setShowEmojis","trayEmoji","setTrayEmoji","sent","setSent","hasConvertedRef","nodeRef","userText","textArray","emojiArray","isEmojiCode","replaceAll","emojiIndex","search","emoji","emoticons","native","newText","pseudoTarget","convertInputToEmoji","handleClickOutside","contains","handleSendClick","input__container","controls__container","emoji__container","emoji__button","onMouseOver","newEmoji","random","size","emoji__mart","onSelect","send__button","send__icon","ChatList","ChatContainer","handleResize","dimensions","handleVideosReset","querySelectorAll","contentWindow","postMessage","chat__button","chevron","chat__container","RoomContainer","hostRoomName","setHostRoomName","paddingRight","App","path","exact","component","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.20d6e4fb.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"SubmitButton_button__3VF97\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"RoomForm_container__alDIN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"control__button\":\"VideoControlsButton_control__button__3hs18\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"identicon\":\"Identicon_identicon__2bxpZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ChatList_container__2lgwL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"RoomContainer_container__1UDS-\"};","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 148;","import {createContext, useState, useEffect, useRef} from \"react\";\r\nimport {io} from \"socket.io-client\";\r\nimport Peer from \"peerjs\";\r\nimport hark from \"hark\";\r\n\r\nconst SocketContext = createContext();\r\n\r\nlet socket = null;\r\nlet peer = null;\r\n\r\nconst SocketContextProvider = ({children}) => {\r\n  const [params, setParams] = useState(\"\");\r\n  const [stream, setStream] = useState({});\r\n  const [hasWebcam, setHasWebcam] = useState(false);\r\n  const [shareScreen, setShareScreen] = useState(false);\r\n  const [isHost, setIsHost] = useState(false);\r\n  const [videoStreams, setVideoStreams] = useState({});\r\n  const [peers, setPeers] = useState({});\r\n  const [users, setUsers] = useState({});\r\n  const [displayName, setDisplayName] = useState(\"\");\r\n  const [roomName, setRoomName] = useState(\"\");\r\n  const [isTalking, setIsTalking] = useState({});\r\n  const [gainStreams, setGainStreams] = useState({});\r\n  const [hasPeerError, setPeerError] = useState(false);\r\n  const [hasSocketError, setSocketError] = useState(false);\r\n\r\n  // TO DO: Find another solution for all these refs\r\n  const videoRefs = useRef(videoStreams);\r\n  const peersRefs = useRef(peers);\r\n  const usersRefs = useRef(users);\r\n  const displayNameRef = useRef(displayName);\r\n  const roomNameRef = useRef(roomName);\r\n  const shareScreenRef = useRef(shareScreen);\r\n\r\n  useEffect(() => {\r\n    // RUNS WHEN USER CHANGES NAME\r\n    if(Object.keys(videoStreams).length && socket && displayName !== displayNameRef.current) {\r\n      const newVideos = Object.entries(videoStreams).find(video => video[1].displayName === displayNameRef.current);\r\n      changeDisplayName(newVideos[0], displayName);\r\n      socket.emit(\"change-username\", peer.id, displayNameRef.current, displayName);\r\n    }\r\n  }, [displayName, videoStreams]);\r\n\r\n  useEffect(() => {\r\n    // HANDLES ROOM NAME CHANGE\r\n    if(roomName !== roomNameRef.current && socket && isHost) {\r\n      socket.emit(\"change-roomname\", roomNameRef.current, roomName);\r\n    }\r\n  }, [roomName, isHost]);\r\n\r\n  useEffect(() => {\r\n    // HANDLES WEBCAM CHANGE\r\n    if(socket && stream.id) {\r\n      changeWebcamStatus(stream.id, hasWebcam);\r\n      if(Object.keys(peers).length) {\r\n        socket.emit(\"change-webcam-status\", peer.id, stream.id, hasWebcam);\r\n      }\r\n    }\r\n  }, [hasWebcam, stream.id, peers]);\r\n\r\n  useEffect(() => {\r\n    // HANDLES SCREEN SHARING\r\n    if(socket && stream.id && shareScreen !== shareScreenRef.current) {\r\n      if(shareScreen) {\r\n        navigator.mediaDevices.getDisplayMedia()\r\n          .then(currentStream => {\r\n            // EVENT LISTENER FOR WHEN CHROME STOP SHARE BUTTON CLICKED\r\n            currentStream.getVideoTracks()[0].addEventListener(\"ended\", () => {\r\n              setShareScreen(false);\r\n            });\r\n            \r\n            replaceVideoStream(stream, currentStream, peer);\r\n          })\r\n          .catch(e => {\r\n            setShareScreen(false);\r\n            console.log(e);\r\n          });\r\n      }\r\n      else {\r\n        navigator.mediaDevices.getUserMedia({video: {width: {min: 640}, height: {min: 480}}})\r\n        .then(currentStream => {\r\n          replaceVideoStream(stream, currentStream, peer);\r\n        })\r\n        .catch(e => {\r\n          const video = fakeVideo();\r\n          replaceVideoStream(stream, video, peer, true);\r\n          setHasWebcam(false);\r\n          console.log(e);\r\n        });\r\n      }\r\n    }\r\n  }, [shareScreen, stream]);\r\n\r\n  useEffect(() => {\r\n    // SET REFS SO EVENT LISTENERS CAN ACCESS CURRENT STATE\r\n    videoRefs.current = videoStreams;\r\n    peersRefs.current = peers;\r\n    usersRefs.current = users;\r\n    displayNameRef.current = displayName;\r\n    roomNameRef.current = roomName;\r\n    shareScreenRef.current = shareScreen;\r\n  }, [videoStreams, peers, users, displayName, roomName, shareScreen]);\r\n\r\n  useEffect(() => {\r\n    const initSocket = () => {\r\n      socket = io(process.env.REACT_APP_SOCKET_HOST, {\r\n        reconnection: true\r\n      });\r\n      socket.on(\"peer-server-connected\", () => {\r\n        getStream();\r\n      });\r\n      socket.on(\"room-name\", room => {\r\n        setRoomName(room);\r\n      });\r\n      socket.on(\"is-host\", (bool) => {\r\n        setIsHost(bool);\r\n      });\r\n      socket.on(\"connect\", e => {\r\n        setSocketError(false);\r\n      });\r\n      socket.on(\"connect_error\", e => {\r\n        console.log(e);\r\n        setSocketError(e);\r\n      });\r\n      socket.on(\"error\", (e) => {\r\n        console.log(e);\r\n        setSocketError(e);\r\n      });\r\n    };\r\n    \r\n    const initPeer = () => {\r\n      peer = new Peer();\r\n      peer.on(\"open\", id => {\r\n        setPeerError(false);\r\n        socket.emit(\"join-room\", params, id, displayNameRef.current, roomNameRef.current);\r\n      });\r\n      peer.on(\"error\", (e) => {\r\n        console.log(e);\r\n        setPeerError(e);\r\n        if(peer.disconnected && !peer.destroyed) peer.reconnect();\r\n      });\r\n    };\r\n\r\n    const getStream = () => {\r\n      navigator.mediaDevices.getUserMedia({video: {width: {min: 640}, height: {min: 480}}, audio: true})\r\n        .then(currentStream => {\r\n          // SET UP LISTENERS\r\n          setUserConnection(currentStream, true);\r\n          setPeerListeners(currentStream);\r\n          const harkListeners = setUpVolumeControl(currentStream, true);\r\n\r\n          // SET USER STREAM\r\n          setStream(currentStream);\r\n          setVideoStreams(videoStreams => ({\r\n            ...videoStreams, \r\n            [currentStream.id]: {\r\n              streamID: currentStream,\r\n              displayName: displayNameRef.current,\r\n              hark: harkListeners,\r\n              hasWebcam: true\r\n            }\r\n          }));\r\n          setHasWebcam(true);\r\n        }).catch(e => {\r\n          console.log(e);\r\n          const currentStream = fakeAudio();\r\n          const video = fakeVideo();\r\n          currentStream.addTrack(video);\r\n\r\n          // SET UP LISTENERS\r\n          setUserConnection(currentStream, false);\r\n          setPeerListeners(currentStream);\r\n          const harkListeners = setUpVolumeControl(currentStream, true);\r\n\r\n          // SET USER STREAM\r\n          setStream(currentStream);\r\n          setVideoStreams(videoStreams => ({\r\n            ...videoStreams, \r\n            [currentStream.id]: {\r\n              streamID: currentStream,\r\n              displayName: displayNameRef.current,\r\n              hark: harkListeners,\r\n              hasWebcam: false\r\n            }\r\n          }));\r\n          setHasWebcam(false);\r\n      });\r\n    };\r\n    const setUserConnection = (stream, hasWebcam) => {\r\n      socket.on(\"user-connected\", userID => {\r\n        connectToNewUser(userID, stream);\r\n      });\r\n      socket.on(\"user-disconnected\", (userID) => {\r\n        const peers = peersRefs.current;\r\n        if(peers[userID]) {\r\n          peers[userID].call.close();\r\n          let {[userID]: tmp, ...rest} = peers;\r\n          setPeers(rest);\r\n        }\r\n        socket.emit(\"get-users-list\", null, false);\r\n      });\r\n      socket.on(\"users-list\", userList => {\r\n        setUsers({...userList});\r\n      });\r\n      socket.on(\"username-changed\", (id, oldID, newUser) => {\r\n        const peerStreamID = peersRefs.current[id].callStreamID.id;\r\n        changeDisplayName(peerStreamID, newUser);\r\n      });\r\n      socket.on(\"webcam-status-changed\", (id, newUsers, streamID, hasWebcam) => {\r\n        setUsers({...newUsers});\r\n        if(videoRefs.current[streamID]) {\r\n          changeWebcamStatus(streamID, hasWebcam);\r\n        }\r\n      });\r\n      socket.emit(\"get-users-list\", hasWebcam);\r\n      socket.emit(\"stream-ready\");\r\n    };\r\n\r\n    // Fixes PeerJS calling listener for every media track in call\r\n    let callList = [];\r\n\r\n    const setPeerListeners = (stream) => {\r\n      // WHEN THE USER HAS CALLED\r\n      peer.on(\"call\", call => {\r\n        call.answer(stream);\r\n  \r\n        // WHEN THE HOST RECIEVES A STREAM\r\n        call.on(\"stream\", userVideoStream => {\r\n          if(!callList[call.peer]) {\r\n            const harkListeners = setUpVolumeControl(userVideoStream, false);\r\n            addVideo(call.peer, userVideoStream, call, userVideoStream, harkListeners);\r\n            callList[call.peer] = call;\r\n          }\r\n          else {\r\n            callList = [];\r\n          }\r\n        });\r\n        // WHEN THE USER HAS CLOSED\r\n        call.on(\"close\", () => {\r\n          removeVideo();\r\n        });\r\n      });\r\n    };\r\n  \r\n    const connectToNewUser = (userID, stream) => {\r\n      // CALLING A USER\r\n      const options = {\r\n        \"constraints\": {\r\n          \"mandatory\": {\r\n            \"OfferToReceiveAudio\": true,\r\n            \"OfferToReceiveVideo\": true\r\n          },\r\n          offerToReceiveAudio: 1,\r\n          offerToReceiveVideo: 1,\r\n        }\r\n      };\r\n      const call = peer.call(userID, stream, options);\r\n  \r\n      // WHEN USER IS CALLED\r\n      call.on(\"stream\", newUserStream => {\r\n        if(!callList[call.peer]) {\r\n          const harkListeners = setUpVolumeControl(newUserStream, false);\r\n          addVideo(userID, newUserStream, call, call._remoteStream, harkListeners);\r\n          callList[call.peer] = call;\r\n        }\r\n        else {\r\n          callList = [];\r\n        }\r\n      });\r\n      // WHEN USER HAS CLOSED\r\n      call.on(\"close\", () => {\r\n        removeVideo();\r\n      });\r\n    };\r\n\r\n    const speechListeners = (stream, audioCtx, gainNode) => {\r\n      const options = {threshold: -55, audioContext: audioCtx};\r\n      const speechEvents = hark(stream, options, gainNode);\r\n  \r\n      speechEvents.on(\"speaking\", () => {\r\n        setIsTalking(streams => ({...streams, [stream.id]: true}));\r\n      });\r\n  \r\n      speechEvents.on(\"stopped_speaking\", () => {\r\n        setIsTalking(streams => ({...streams, [stream.id]: false}));\r\n      });\r\n\r\n      // TEMP FIX FOR AudioContext NEEDING USER GESTURE TO START\r\n      // TO-DO: Create a state to show if AudioContext is suspended\r\n      // and show text to click/press any key to hear sound\r\n      speechEvents.on(\"volume_change\", () => {\r\n        if(audioCtx.state === \"suspended\") audioCtx.resume();\r\n      });\r\n  \r\n      return speechEvents;\r\n    };\r\n  \r\n    const setUpVolumeControl = (stream, isHost) => {\r\n      const audioCtx = new (window.AudioContext || window.webkitAudioContext)();\r\n      const source = audioCtx.createMediaStreamSource(stream);\r\n      const gainNode = audioCtx.createGain();\r\n      setGainStreams(streams => ({...streams, [stream.id]: {gainNode, isHost: isHost}}));\r\n      source.connect(gainNode);\r\n      gainNode.connect(audioCtx.destination);\r\n      return speechListeners(stream, audioCtx, gainNode);\r\n    };\r\n\r\n    // IF IN ROOM SET UP LISTENERS\r\n    if(params) {\r\n      initSocket();\r\n      initPeer();\r\n    }\r\n\r\n    return () => {\r\n      if(socket && params) {\r\n        socket.removeAllListeners();\r\n        socket.close();\r\n        socket = null;\r\n\r\n        setStream(prevStream => {\r\n          if(prevStream.id) {\r\n            prevStream.getTracks().forEach(track => {\r\n              track.stop();\r\n            });\r\n          }\r\n          return {};\r\n        });\r\n        for(const value of Object.values(videoRefs.current)) {\r\n          value.hark.stop();\r\n        }\r\n\r\n        peer.destroy();\r\n        setHasWebcam(false);\r\n        setVideoStreams({});\r\n        setPeers({});\r\n        setIsTalking({});\r\n        setPeerError(false);\r\n        setSocketError(false);\r\n      }\r\n    };\r\n  }, [params]);\r\n\r\n  const addVideo = (id, stream, call, callStreamID, harkListeners) => {\r\n    setVideoStreams(videoStreams => ({\r\n      ...videoStreams, \r\n      [stream.id]: {\r\n        streamID: stream,\r\n        displayName: usersRefs.current[id].displayName,\r\n        hark: harkListeners,\r\n        hasWebcam: usersRefs.current[id].hasWebcam\r\n      }\r\n    }));\r\n    setPeers(peers => ({...peers, [id]: {call, callStreamID}}));\r\n  };\r\n\r\n  const removeVideo = async () => {\r\n    // TO-DO: Figure out how to wait for peer to disconnect and remove video from view\r\n    const prom = await new Promise(resolve => setTimeout(() => resolve(videoRefs.current)), 0);\r\n    const streams = prom;\r\n    for(const [key, value] of Object.entries(streams)) {\r\n      if(!value.streamID.active) {\r\n        let {[key]: tmp, ...rest} = streams;\r\n        streams[key].hark.stop();\r\n        setVideoStreams(rest);\r\n        return;\r\n      }\r\n    }\r\n  };\r\n\r\n  const replaceVideoStream = (stream, currentStream, peer, isTrack) => {\r\n    if(stream.getVideoTracks().length) {\r\n      stream.getVideoTracks()[0].stop();\r\n      stream.removeTrack(stream.getVideoTracks()[0]);\r\n    }\r\n    stream.addTrack(isTrack ? currentStream : currentStream.getVideoTracks()[0]);\r\n    for(const [, value] of peer._connections) {\r\n      // FIX PEERJS NOT CLEARING DESTROYED _CONNECTIONS\r\n      if(value.length) {\r\n        for(const connection of value[0].peerConnection?.getSenders()) {\r\n          if(connection.track?.kind === \"video\" || connection.track === null) {\r\n            connection.replaceTrack(isTrack ? currentStream : currentStream.getVideoTracks()[0]);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const changeDisplayName = (key, displayName) => {\r\n    setVideoStreams(videos => ({...videos, [key]: {...videos[key], displayName}}));\r\n  };\r\n\r\n  const changeWebcamStatus = (key, hasWebcam) => {\r\n    setVideoStreams(videos => ({...videos, [key]: {...videos[key], hasWebcam}}));\r\n  };\r\n\r\n  const fakeVideo = ({width = 640, height = 480} = {}) => {\r\n    const canvas = Object.assign(document.createElement(\"canvas\"), {width, height});\r\n    canvas.getContext(\"2d\").fillRect(0, 0, width, height);\r\n    const stream = canvas.captureStream();\r\n    return Object.assign(stream.getVideoTracks()[0], {enabled: false});\r\n  };\r\n\r\n  const fakeAudio = () => {\r\n    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();\r\n    const fakeAudio = audioCtx.createMediaStreamDestination();\r\n    const currentStream = new MediaStream(fakeAudio.stream);\r\n\r\n    return currentStream;\r\n  }\r\n\r\n  return (\r\n    <SocketContext.Provider value={{\r\n      socket,\r\n      peer,\r\n      stream,\r\n      shareScreen,\r\n      isHost,\r\n      videoStreams,\r\n      displayName,\r\n      roomName,\r\n      isTalking,\r\n      gainStreams,\r\n      users,\r\n      hasPeerError,\r\n      hasSocketError,\r\n      setHasWebcam,\r\n      setShareScreen,\r\n      setDisplayName,\r\n      setRoomName,\r\n      setParams\r\n    }}>\r\n      {children}\r\n    </SocketContext.Provider>\r\n  );\r\n};\r\n\r\nexport {SocketContext, SocketContextProvider};\r\n","import {createContext,useContext, useEffect, useState} from \"react\";\r\nimport { SocketContext } from \"./SocketContext\";\r\n\r\nconst ChatContext = createContext();\r\n\r\nconst ChatContextProvider = ({children}) => {\r\n  const [isChatOpen, setIsChatOpen] = useState(false);\r\n  const [chatDimensions, setChatDimensions] = useState({width: 0});\r\n  const [message, setMessage] = useState(``);\r\n  const [isAtTop, setIsAtTop] = useState(false);\r\n  const [hasOlderMessages, setHasOlderMessages] = useState(true);\r\n  const [messageList, setMessageList] = useState([]);\r\n  const [hasInitMessages, setHasInitMessages] = useState(false);\r\n  const {socket, stream, displayName} = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    const handleJoinedRoom = () => {\r\n      socket.emit(\"get-messages-list\");\r\n    };\r\n\r\n    if(socket) {\r\n      if(message) {\r\n        const messageObj = {\r\n          message: `${message}`,\r\n          streamID: stream.id,\r\n          createdAt: new Date().getTime(),\r\n          userName: displayName,\r\n          ogMeta: {}\r\n        };\r\n        socket.emit(\"send-message\", messageObj);\r\n        setMessage(``);\r\n      }\r\n      if(isAtTop && hasOlderMessages) {\r\n        socket.emit(\"get-older-messages\", 20);\r\n      }\r\n      socket.on(\"joined-room\", handleJoinedRoom);\r\n      socket.on(\"message-received\", handleMessageReceived);\r\n      socket.on(\"updated-message\", handleUpdatedMessage);\r\n      socket.on(\"older-messages-received\", handleOlderMessagesReceived);\r\n      socket.on(\"messages-list\", handleMessagesList);\r\n      socket.on(\"all-older-messages-received\", handleAllOlderMessagesReceived);\r\n    }\r\n\r\n    return () => {\r\n      if(socket) {\r\n        socket.removeListener(\"joined-room\", handleJoinedRoom);\r\n        socket.removeListener(\"message-received\", handleMessageReceived);\r\n        socket.removeListener(\"updated-message\", handleUpdatedMessage);\r\n        socket.removeListener(\"older-messages-received\", handleOlderMessagesReceived);\r\n        socket.removeListener(\"messages-list\", handleMessagesList);\r\n        socket.removeListener(\"all-older-messages-received\", handleAllOlderMessagesReceived);\r\n      }\r\n      else {\r\n        setHasOlderMessages(true);\r\n        setMessageList([]);\r\n        setHasInitMessages(false);\r\n        setIsAtTop(false);\r\n      }\r\n    };\r\n  }, [socket, message, displayName, isAtTop, stream.id, hasOlderMessages]);\r\n\r\n  const handleMessageReceived = (message) => {\r\n    setMessageList(messages => [...messages, message]);\r\n  };\r\n\r\n  const handleUpdatedMessage = (message) => {\r\n    setMessageList(msgs => msgs.map(msg => {\r\n      if(msg.id === message.id) return message;\r\n      return msg;\r\n    }));\r\n  };\r\n\r\n  const handleOlderMessagesReceived = (messages) => {\r\n    setMessageList(msgs => [...messages]);\r\n    setIsAtTop(false);\r\n  };\r\n\r\n  const handleAllOlderMessagesReceived = (hasMessages) => {\r\n    setHasOlderMessages(false);\r\n  };\r\n\r\n  const handleMessagesList = (messages) => {\r\n    setMessageList(msgs => [...msgs, ...messages]);\r\n    setHasInitMessages(hasMsgs => true);\r\n  };\r\n\r\nreturn (\r\n  <ChatContext.Provider value={{\r\n    isChatOpen, \r\n    chatDimensions, \r\n    messageList,\r\n    hasOlderMessages,\r\n    isAtTop,\r\n    hasInitMessages,\r\n    setIsChatOpen, \r\n    setChatDimensions,\r\n    setMessage,\r\n    setIsAtTop\r\n  }}>\r\n    {children}\r\n  </ChatContext.Provider>\r\n);\r\n};\r\n\r\nexport {ChatContext, ChatContextProvider};","import { useContext } from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\nimport { ChatContext } from \"../../context/ChatContext\";\r\nimport { SocketContext } from \"../../context/SocketContext\";\r\nimport styles from \"./NavBar.module.css\";\r\n\r\nconst NavBar = () => {\r\n  const {isChatOpen, setIsChatOpen} = useContext(ChatContext);\r\n  const {socket} = useContext(SocketContext);\r\n\r\n  const handleClick = () => {\r\n    setIsChatOpen(c => !c);\r\n  };\r\n\r\n  const handleKeyDown = (e) => {\r\n    if(e.keyCode === 32 || e.keyCode === 13) {\r\n      handleClick();\r\n    }\r\n  };\r\n\r\n  return(\r\n    <nav className={styles.nav}>\r\n      <div className={styles.container}>\r\n        <div className={styles.logo__container}>\r\n          <Link to=\"/\" className={styles.logo}>MSRIT Connect</Link>\r\n          <div className={styles.underline}></div>\r\n        </div>\r\n        <div className={`${socket ? styles.hamburger : styles.hidden}`} onClick={handleClick} onKeyDown={handleKeyDown} tabIndex=\"0\">\r\n          <div className={`${styles.line} ${styles.line__one} ${isChatOpen ? styles.hidden : styles[\"line__one--closed\"]}`}></div>\r\n          <div className={`${styles.line} ${styles.line__two} ${isChatOpen ? styles.hidden : styles[\"line__two--closed\"]}`}></div>\r\n          <div className={`${styles.line} ${styles.line__three} ${isChatOpen ? styles.hidden : styles[\"line__three--closed\"]}`}></div>\r\n          <div className={`${styles.line} ${styles.line__one} ${isChatOpen ? styles[\"line__one--open\"] : styles.hidden}`}></div>\r\n          <div className={`${styles.line} ${styles.line__two} ${isChatOpen ? styles[\"line__two--open\"] : styles.hidden}`}></div>\r\n          <div className={`${styles.line} ${styles.line__three} ${isChatOpen ? styles[\"line__three--open\"] : styles.hidden}`}></div>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default NavBar;\r\n","const createInputs = [\r\n  {\r\n    type: \"text\",\r\n    label: \"Display Name\",\r\n    name: \"username\",\r\n    required: true,\r\n    id: \"username-1\",\r\n    max: \"32\",\r\n    autoComplete: \"on\"\r\n  },\r\n  {\r\n    type: \"text\",\r\n    label: \"Room\",\r\n    name: \"room\",\r\n    required: true,\r\n    id: \"room-1\",\r\n    autoComplete: \"on\"\r\n  }\r\n];\r\n\r\nconst joinInputs = [\r\n  {\r\n    type: \"text\",\r\n    label: \"Display Name\",\r\n    name: \"username\",\r\n    required: true,\r\n    id: \"username-2\",\r\n    max: \"32\",\r\n    autoComplete: \"on\"\r\n  },\r\n  {\r\n    type: \"text\",\r\n    label: \"Room ID\",\r\n    name: \"room\",\r\n    required: true,\r\n    id: \"room-2\",\r\n    autoComplete: \"off\"\r\n  }\r\n];\r\n\r\nexport {createInputs, joinInputs};","import React, {useState, useRef, useEffect, createRef} from \"react\";\r\nimport styles from \"./FormInputs.module.css\";\r\n\r\nconst FormInputs = ({inputs, handleChange, clearInput, handleSubmit}) => {\r\n  const textAreaHeightStyle = 40;\r\n  const [isFocused, setFocused] = useState(false);\r\n  const [currentFocus, setCurrentFocus] = useState(\"\");\r\n  const [textAreaHeight, setTextAreaHeight] = useState(textAreaHeightStyle);\r\n  const textAreaRefs = useRef(inputs.map(() => createRef()));\r\n\r\n  const handleClick = async (e, name) => {\r\n    if(\"clipboard\" in navigator) {\r\n      const text = await navigator.clipboard.readText();\r\n      const synthEvent = {\r\n        target: {\r\n          name,\r\n          value: text\r\n        }\r\n      };\r\n      handleChange(synthEvent);\r\n    }\r\n    else {\r\n      const input = document.getElementById(e);\r\n      input.focus();\r\n      document.execCommand(\"paste\");\r\n    }\r\n  };\r\n\r\n  const handleFocus = (e) => {\r\n    const id = e.target.id.split(\"__\");\r\n    setFocused(!isFocused);\r\n    setCurrentFocus(id[0]);\r\n  }\r\n\r\n  const handleBlur = () => {\r\n    setFocused(!isFocused);\r\n    setCurrentFocus(\"\");\r\n  }\r\n\r\n  useEffect(() => {\r\n    const textAreaResize = (textArea) => {\r\n      textArea.style.height = \"0px\";\r\n      const scrollHeight = textArea.scrollHeight;\r\n      textArea.style.height = scrollHeight + \"px\";\r\n      setTextAreaHeight(scrollHeight);\r\n    };\r\n\r\n    for(let value of textAreaRefs.current) {\r\n      const textArea = value.current;\r\n      if(!textArea) return;\r\n      textAreaResize(textArea);\r\n    }\r\n  }, [inputs]);\r\n\r\n  useEffect(() => {\r\n    const textAreaRefsValue = textAreaRefs.current;\r\n    const handleEnterPress = (e) => {\r\n      if(e.keyCode === 13 && !e.shiftKey) {\r\n        handleSubmit(e);\r\n      }\r\n    };\r\n    for(let value of textAreaRefs.current) {\r\n      const textArea = value.current;\r\n      if(!textArea) return;\r\n      textArea.addEventListener(\"keypress\", handleEnterPress);\r\n    }\r\n\r\n    return () => {\r\n      for(let value of textAreaRefsValue) {\r\n        const textArea = value.current;\r\n        if(!textArea) return;\r\n        textArea.removeEventListener(\"keypress\", handleEnterPress);\r\n      }\r\n    }\r\n  }, [inputs, handleSubmit]);\r\n\r\n  const renderInputs = inputs.map((input, i) => {\r\n    let formInput = null;\r\n    switch(input.formType) {\r\n      case \"textarea\":\r\n        formInput = <textarea\r\n          id={input.id}\r\n          className={`${styles.input} ${styles.textarea}`}\r\n          style={{height: `${textAreaHeight}px`}}\r\n          name={input.name} \r\n          placeholder={input.label} \r\n          required={input.required}\r\n          value={input[input.name]}\r\n          onChange={handleChange}\r\n          autoComplete={input.autoComplete}\r\n          ref={textAreaRefs.current[i]}\r\n        ></textarea>\r\n        break;\r\n      default:\r\n        formInput = <input \r\n          id={input.id}\r\n          className={styles.input}\r\n          type={input.type} \r\n          name={input.name} \r\n          placeholder={input.label} \r\n          required={input.required}\r\n          value={input[input.name]}\r\n          onChange={handleChange}\r\n          maxLength={input.max}\r\n          autoComplete={input.autoComplete}\r\n        />\r\n    };\r\n    return (\r\n      <React.Fragment key={input.name}>\r\n        <label className={styles.label} htmlFor={input.id}>{input.label}</label>\r\n        <div className={`${styles.container} ${styles.container__input}`}>\r\n          {formInput}\r\n          <div \r\n            className={\r\n              `${styles.input__options} \r\n              ${isFocused && currentFocus === input.id ? styles[\"input__options--active\"] : \"\"}\r\n              ${input.formType === \"textarea\" ? textAreaHeight + 4 === textAreaHeightStyle ? \"\" : styles.move__scrollbar : \"\"}`\r\n            }\r\n          >\r\n            <button \r\n              id={`${input.id}__clear`}\r\n              type=\"button\" \r\n              className={styles.clear} \r\n              onClick={() => clearInput(input.name)}\r\n              onFocus={handleFocus} \r\n              onBlur={handleBlur}\r\n            >\r\n              <i className=\"fas fa-times\"></i>\r\n            </button>\r\n            <button \r\n              id={`${input.id}__paste`} \r\n              className={styles.paste} \r\n              type=\"button\" \r\n              onClick={() => handleClick(input.id, input.name)}\r\n              onFocus={handleFocus} \r\n              onBlur={handleBlur}\r\n            >\r\n              <i className={`fas fa-clipboard`}></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  });\r\n  return renderInputs;\r\n};\r\n\r\nexport default FormInputs;","import styles from \"./SubmitButton.module.css\";\r\n\r\nconst SubmitButton = ({text}) => {\r\n  return(\r\n    <button className={styles.button} type=\"submit\">{text}</button>\r\n  )\r\n};\r\n\r\nexport default SubmitButton;","import FormInputs from \"../FormInputs/FormInputs\";\r\nimport SubmitButton from \"../SubmitButton/SubmitButton\";\r\nimport styles from \"./RoomForm.module.css\";\r\n\r\nconst RoomForm = ({inputs, handleChange, handleSubmit, clearInput}) => {\r\n\r\n  return(\r\n    <form className={styles.container} onSubmit={handleSubmit}>\r\n      <FormInputs inputs={inputs} handleChange={handleChange} clearInput={clearInput} />\r\n      <SubmitButton text=\"Join\" />\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default RoomForm;","const ErrorMessage = ({error}) => {\r\n  if(!error || !error.message) return null;\r\n\r\n  return(\r\n    <div>\r\n      <p>An error has occured: {error.message}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ErrorMessage;","import { useEffect, useState } from \"react\";\r\n\r\nexport default function useForm(init = {}) {\r\n  const [values, setValues] = useState(init);\r\n  const initValues = Object.values(init).join(\"\");\r\n\r\n  useEffect(() => {\r\n    setValues(init);\r\n  }, [initValues]);\r\n\r\n  const handleChange = e => {\r\n    let {value, name} = e.target;\r\n    setValues({\r\n      ...values,\r\n      [name]: value\r\n    });\r\n  };\r\n  const handleAdd = e => {\r\n    let {value, name} = e.target;\r\n    setValues({\r\n      ...values,\r\n      [name]: values[name] + value\r\n    });\r\n  };\r\n  const resetForm = () => {\r\n    setValues(init);\r\n  };\r\n  const clearForm = () => {\r\n    let newValues = {...values};\r\n    Object.keys(newValues).map(key => newValues[key] = \"\");\r\n    setValues(newValues);\r\n  };\r\n  const clearInput = (name) => {\r\n    setValues(values => ({...values, [name]: \"\"}));\r\n  };\r\n\r\n  return {\r\n    values,\r\n    setValues,\r\n    handleChange,\r\n    handleAdd,\r\n    resetForm,\r\n    clearForm,\r\n    clearInput\r\n  };\r\n};","import {useState, useEffect} from \"react\";\r\n\r\nconst useStateToLocalStorage = (key) => {\r\n  const [value, setValue] = useState(localStorage.getItem(key) || \"\");\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(key, value);\r\n  }, [value, key]);\r\n\r\n  return [value, setValue];\r\n};\r\n\r\nexport default useStateToLocalStorage;","import {useState} from \"react\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport RoomForm from \"../RoomForm/RoomForm\";\r\nimport ErrorMessage from \"../ErrorMessage/ErrorMessage\";\r\nimport useForm from \"../../hooks/useForm\";\r\nimport useStateToLocalStorage from \"../../hooks/useStateToLocalStorage\";\r\nimport styles from \"./CreateRoom.module.css\";\r\n\r\nconst CreateRoom = ({header, inputs}) => {\r\n  const history = useHistory();\r\n  const {values, handleChange, clearInput} = useForm({username: \"\", room: \"\"});\r\n  const [, setUsername] = useStateToLocalStorage(\"userName\");\r\n  const [, setRoomName] = useStateToLocalStorage(\"roomName\");\r\n  const [fetchError, setFetchError] = useState(false);\r\n\r\n\r\n  const formInputs = inputs.map(input => {\r\n    return {\r\n      ...input,\r\n      [input.name]: values[input.name]\r\n    }\r\n  });\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const res = await fetch(\"/api/uuid\");\r\n      const uuid = (await res.json()).id;\r\n      setUsername(values.username);\r\n      setRoomName(values.room);\r\n      history.push(`/room/${uuid}`);\r\n    } catch(e) {\r\n      setFetchError(e);\r\n      console.log(e);\r\n    }\r\n  };\r\n\r\n  return(\r\n    <div className={styles.container}>\r\n      <h1 className={styles.header}>{header}</h1>\r\n      <RoomForm inputs={formInputs} handleChange={handleChange} handleSubmit={onSubmit} clearInput={clearInput} />\r\n      <ErrorMessage error={fetchError} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateRoom;","const mainHeader = \"Connect with peers instantly!\";\r\nconst subHeader = \"Join peer-to-peer connected rooms where you can: \";\r\nconst cycledWordsList = [\"video chat!\", \"text chat!\", \"screen share!\", \"have fun!\"];\r\n\r\nexport {mainHeader, subHeader, cycledWordsList};","import {useState, useEffect, useRef} from \"react\";\r\nimport { cycledWordsList } from \"../../data/homeHeader\";\r\nimport {v4 as uuidv4} from \"uuid\";\r\nimport styles from \"./HomeHeader.module.css\";\r\n\r\nconst HomeHeader = ({mainHeader, subHeader, cycle}) => {\r\n  const [count, setCount] = useState(0);\r\n  const [cycledWord, setCycledWord] = useState(cycledWordsList.length ? cycledWordsList[count] : \"\");\r\n  const cycledRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if(!cycle && !cycledWordsList[count + 1]) return;\r\n    const cycledRefValue = cycledRef.current;\r\n    const handleCycle = () => {\r\n      if(!cycledWordsList[count + 1]) return;\r\n      setCycledWord(cycledWordsList[count + 1]);\r\n      setCount(count + 1);\r\n    };\r\n    if(cycledRefValue && cycledWord) {\r\n      cycledRefValue.addEventListener(\"animationend\", handleCycle);\r\n    }\r\n    return () => {\r\n      if(cycledRefValue && cycledWord) {\r\n        cycledRefValue.removeEventListener(\"animationend\", handleCycle);\r\n      }\r\n    };\r\n  }, [cycledWord, cycle, count]);\r\n\r\n  const renderCycledWord = () => {\r\n    if(!cycle) return \"\";\r\n    if(!cycledWordsList[count + 1]) {\r\n      return <span key={uuidv4()} ref={cycledRef} className={`${styles.cycled__word} ${styles[\"cycled__word--stop\"]}`}>{cycledWord}</span>;\r\n    }\r\n    return <span key={uuidv4()} ref={cycledRef} className={styles.cycled__word}>{cycledWord}</span>;\r\n  };\r\n\r\n  return(\r\n    <div className={styles.container}>\r\n      <h1 className={styles.main__header}>{mainHeader}</h1>\r\n      <h2 className={styles.sub__header}>{subHeader} {renderCycledWord()}</h2>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomeHeader;","import {useState} from \"react\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport RoomForm from \"../RoomForm/RoomForm\";\r\nimport ErrorMessage from \"../ErrorMessage/ErrorMessage\";\r\nimport useForm from \"../../hooks/useForm\";\r\nimport useStateToLocalStorage from \"../../hooks/useStateToLocalStorage\";\r\nimport styles from \"./JoinRoom.module.css\";\r\n\r\nconst JoinRoom = ({header, inputs}) => {\r\n  const history = useHistory();\r\n  const {values, handleChange, clearInput} = useForm({username: \"\", room: \"\"});\r\n  const [, setUsername] = useStateToLocalStorage(\"userName\");\r\n  const [, setRoomName] = useStateToLocalStorage(\"roomName\");\r\n  const [fetchError, setFetchError] = useState(false);\r\n\r\n\r\n  const formInputs = inputs.map(input => {\r\n    return {\r\n      ...input,\r\n      [input.name]: values[input.name]\r\n    }\r\n  });\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      setUsername(values.username);\r\n      await setRoomName(\"\");\r\n      history.push(`/room/${values.room}`);\r\n    } catch(e) {\r\n      setFetchError(e);\r\n      console.log(e);\r\n    }\r\n  };\r\n\r\n  return(\r\n    <div className={styles.container}>\r\n      <h1 className={styles.header}>{header}</h1>\r\n      <RoomForm inputs={formInputs} handleChange={handleChange} handleSubmit={onSubmit} clearInput={clearInput} />\r\n      <ErrorMessage error={fetchError} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default JoinRoom;","import {createInputs, joinInputs} from \"../../data/homeInputs\";\r\nimport CreateRoom from \"../CreateRoom/CreateRoom\";\r\nimport HomeHeader from \"../HomeHeader/HomeHeader\";\r\nimport JoinRoom from \"../JoinRoom/JoinRoom\";\r\nimport {mainHeader, subHeader} from \"../../data/homeHeader\";\r\nimport styles from \"./HomeContainer.module.css\";\r\n\r\nconst HomeContainer = () => {\r\n\r\n  return(\r\n    <div className={styles.container}>\r\n      <section className={styles.header__container}>\r\n        <HomeHeader mainHeader={mainHeader} subHeader={subHeader} cycle={true} />\r\n      </section>\r\n      <section className={`${styles.forms}`}>\r\n        <CreateRoom header={\"Create Room\"} inputs={createInputs} />\r\n        <JoinRoom header={\"Join Room\"} inputs={joinInputs} />\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomeContainer;","import {useState} from \"react\";\r\nimport {useLocation} from \"react-router-dom\";\r\nimport styles from \"./CopyButton.module.css\";\r\n\r\nconst CopyButton = () => {\r\n  const location = useLocation();\r\n  const [copied, setCopied] = useState(false);\r\n\r\n  const searchParams = location.pathname.split(\"/\");\r\n  const roomID = searchParams[searchParams.length - 1];\r\n\r\n  const handleClick = () => {\r\n    if(\"clipboard\" in navigator) {\r\n      navigator.clipboard.writeText(roomID)\r\n        .then(() => {\r\n          setCopied(true);\r\n          setTimeout(() => setCopied(false), 1000);\r\n        }).catch(err => {\r\n          console.log(err);\r\n        });\r\n    }\r\n    else if(document.queryCommandSupported(\"copy\")) {\r\n      let tmp = document.getElementById(\"blank_copy_url\");\r\n      tmp.style.display = \"block\";\r\n      tmp.value = roomID;\r\n      tmp.focus();\r\n      tmp.select();\r\n      document.execCommand(\"copy\");\r\n      tmp.style.display = \"none\";\r\n    }\r\n  };\r\n\r\n  return(\r\n    <>\r\n    <button className={styles.button} type=\"button\" onClick={handleClick} disabled={copied}>\r\n      {copied ? `Copied!` : `Copy Room ID`}\r\n      <i className={`fas fa-copy ${styles.copy}`}></i>\r\n    </button>\r\n    <input id=\"blank_copy_url\" className={styles.hidden}></input></>\r\n  );\r\n};\r\n\r\nexport default CopyButton;","import FormInputs from \"../FormInputs/FormInputs\";\r\nimport styles from \"./EditWrapper.module.css\";\r\n\r\nconst EditWrapper = ({inputs, clearInput, handleSubmit, handleChange, handleClick, isEditing, children, hidden = false, formStyles=\"\", hideButton=false}) => {\r\n  return(\r\n    <form className={styles[formStyles]} onSubmit={handleSubmit}>\r\n      {isEditing\r\n        ? <FormInputs inputs={inputs} handleChange={handleChange} clearInput={clearInput} handleSubmit={handleSubmit}/>\r\n        : children\r\n      }\r\n      <button \r\n        type=\"button\" \r\n        className={\r\n          `${styles.edit} \r\n          ${isEditing ? styles[\"edit--active\"] : \"\"} \r\n          ${hidden && !isEditing ? styles.hidden : \"\"}\r\n          ${hideButton ? styles.hidden : \"\"}\r\n          `\r\n        } \r\n        onClick={handleClick}\r\n      >\r\n        {isEditing\r\n          ? <i className=\"far fa-check-circle\"></i>\r\n          :\r\n            <i className={`fas fa-edit`}></i>\r\n        }\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default EditWrapper;","const roomInput = [\r\n  {\r\n    type: \"text\",\r\n    label: \"Room Name\",\r\n    name: \"room\",\r\n    required: true,\r\n    id: \"room-1\",\r\n    autoComplete: \"on\"\r\n  }\r\n];\r\n\r\nconst nameInput = [\r\n  {\r\n    type: \"text\",\r\n    label: \"Display Name\",\r\n    name: \"username\",\r\n    required: true,\r\n    id: \"username-1\",\r\n    max: \"32\",\r\n    autoComplete: \"on\"\r\n  }\r\n];\r\n\r\nexport {roomInput, nameInput};","import {useState} from \"react\";\r\nimport useForm from \"../../hooks/useForm\";\r\nimport CopyButton from \"../CopyButton/CopyButton\";\r\nimport EditWrapper from \"../EditWrapper/EditWrapper\";\r\nimport {roomInput} from \"../../data/roomInputs\";\r\nimport styles from \"./VideoRoomHeader.module.css\";\r\n\r\nconst VideoRoomHeader = ({room, setRoomName, isHost}) => {\r\n  const {values, handleChange, clearInput} = useForm({room});\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [lastRoomName, setLastRoomName] = useState(room);\r\n\r\n  const formInputs = roomInput.map(input => {\r\n    return {\r\n      ...input,\r\n      [input.name]: values[input.name]\r\n    }\r\n  });\r\n\r\n  const handleClick = () => {\r\n    if(!values.room.length && !isEditing) {\r\n      setIsEditing(true);\r\n    }\r\n    if(values.room.length) {\r\n      if(lastRoomName !== values.room) {\r\n        setRoomName(values.room);\r\n        setLastRoomName(values.room);\r\n      }\r\n      setIsEditing(!isEditing);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if(lastRoomName !== values.room) {\r\n      setRoomName(values.room);\r\n      setLastRoomName(values.room);\r\n    }\r\n    setIsEditing(false);\r\n  };\r\n\r\n  return(\r\n    <div className={styles.header}>\r\n      <div className={`${styles.header__container} ${isEditing ? styles[\"header__container--active\"] : \"\"}`}>\r\n        {isHost\r\n          ? <EditWrapper \r\n              inputs={formInputs} \r\n              handleChange={handleChange} \r\n              clearInput={clearInput}\r\n              handleSubmit={handleSubmit}\r\n              handleClick={handleClick}\r\n              isEditing={isEditing}\r\n            >\r\n              <h1 className={styles.heading}>{room}</h1>\r\n            </EditWrapper>\r\n          : <h1 className={styles.heading}>{room}</h1>\r\n        }\r\n      </div>\r\n      <CopyButton />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoRoomHeader;","import styles from \"./ErrorDisplay.module.css\";\r\n\r\nconst ErrorDisplay = ({error}) => {\r\n  return(\r\n    <div className={styles.error}>\r\n      <p className={styles.error__message}>Error: {error.type}: {error.message}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ErrorDisplay;","import styles from \"./Loading.module.css\";\r\n\r\nconst Loading = () => {\r\n  return(\r\n    <div className={styles.container}>\r\n      <h2 className={styles.message}>Connecting to server...</h2>\r\n      <div className={styles.loading}></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loading;","import styles from \"./VideoControlsButton.module.css\";\r\n\r\nconst VideoControlsButton = ({buttonClass, spanClass, title, iconClass, handleClick, handleFocus}) => {\r\n  return(\r\n    <button \r\n      type=\"button\" \r\n      className={`${buttonClass} ${styles.control__button}`} \r\n      title={title}\r\n      onClick={handleClick}\r\n      onFocus={handleFocus}\r\n      onBlur={handleFocus}\r\n    >\r\n      <span className={`${spanClass}`}><i className={iconClass}></i></span>\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default VideoControlsButton;","import {useState, useEffect, useContext} from \"react\";\r\nimport EditWrapper from \"../EditWrapper/EditWrapper\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport useForm from \"../../hooks/useForm\";\r\nimport useStateToLocalStorage from \"../../hooks/useStateToLocalStorage\";\r\nimport { SocketContext } from \"../../context/SocketContext\";\r\nimport styles from \"./VideoControls.module.css\";\r\nimport {nameInput} from \"../../data/roomInputs\";\r\nimport VideoControlsButton from \"../VideoControlsButton/VideoControlsButton\";\r\n\r\nconst VideoControls = ({stream, hasWebcam, displayName, gainStreams, handleMuted, handleFullScreen, isFullScreen, videoWidth}) => {\r\n  const history = useHistory();\r\n  const {setDisplayName, stream: myStream, setHasWebcam, shareScreen, setShareScreen} = useContext(SocketContext);\r\n  const {values, setValues, handleChange, clearInput} = useForm({volume: gainStreams?.isHost ? 0 : 1, username: displayName});\r\n  const [isMuted, setMuted] = useState(gainStreams?.isHost ? true : false);\r\n  const [isVolumeFocused, setVolumeFocused] = useState(false);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [lastName, setLastName] = useState(displayName);\r\n  const [, setUserName] = useStateToLocalStorage(\"userName\");\r\n  const [playVideo, setPlayVideo] = useState(stream?.getVideoTracks()[0].enabled ? true : false);\r\n  const [playMic, setPlayMic] = useState(stream?.getAudioTracks().length ? true : false);\r\n  const [isMyStream] = useState(stream?.id === myStream?.id);\r\n  const [isFocused, setIsFocused] = useState(false);\r\n\r\n  const formInputs = nameInput.map(input => {\r\n    return {\r\n      ...input,\r\n      [input.name]: values[input.name]\r\n    }\r\n  });\r\n\r\n  //TO-DO: FIX STATE NOT UPDATING WHEN RANGE HITS 0\r\n  if(gainStreams && values.volume >= 0) gainStreams.gainNode.gain.value = values.volume;\r\n\r\n  useEffect(() => {\r\n    if(values.volume > 0 && isMuted) {\r\n      setMuted(false);\r\n      handleMuted();\r\n    }\r\n    if(values.volume <= 0 && !isMuted) {\r\n      setMuted(true);\r\n      handleMuted();\r\n    }\r\n  }, [values.volume, isMuted, handleMuted]);\r\n\r\n  useEffect(() => {\r\n    if(hasWebcam) {\r\n      setPlayVideo(p => true);\r\n    }\r\n    else {\r\n      setPlayVideo(p => false);\r\n    }\r\n  }, [hasWebcam]);\r\n\r\n  const handleMicClick = () => {\r\n    if(!stream.getAudioTracks().length) return;\r\n    if(playMic) {\r\n      stream.getAudioTracks()[0].enabled = false;\r\n      setPlayMic(false);\r\n    }\r\n    else {\r\n      stream.getAudioTracks()[0].enabled = true;\r\n      setPlayMic(true);\r\n    }\r\n    handleMuted();\r\n  };\r\n\r\n  const handleVideoClick = () => {\r\n    if(!stream.getVideoTracks().length) return;\r\n    if(stream.getVideoTracks()[0].canvas) return;\r\n    if(playVideo) {\r\n      stream.getVideoTracks()[0].enabled = false;\r\n      setPlayVideo(false);\r\n      setHasWebcam(false);\r\n    }\r\n    else {\r\n      stream.getVideoTracks()[0].enabled = true;\r\n      setPlayVideo(true);\r\n      setHasWebcam(true);\r\n    }\r\n  };\r\n\r\n  const handleScreenClick = () => {\r\n    setShareScreen(!shareScreen);\r\n  };\r\n\r\n  const handleVolumeClick = (e) => {\r\n    if(isMuted) {\r\n      setValues(values => ({...values, volume: 1}));\r\n    }\r\n    else {\r\n      setValues(values => ({...values, volume: 0}));\r\n    }\r\n  };\r\n\r\n  const handleDisconnectClick = () => {\r\n    history.push(\"/\");\r\n  };\r\n\r\n  const handleNameClick = () => {\r\n    if(!values.username.length && !isEditing) {\r\n      setIsEditing(true);\r\n    }\r\n    if(values.username.length) {\r\n      if(lastName !== values.username) {\r\n        setUserName(values.username);\r\n        setDisplayName(values.username);\r\n        setLastName(values.username);\r\n      }\r\n      setIsEditing(!isEditing);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if(lastName !== values.username) {\r\n      setUserName(values.username);\r\n      setDisplayName(values.username);\r\n      setLastName(values.username);\r\n    }\r\n    setIsEditing(false);\r\n  };\r\n\r\n  const handleFocus = () => {\r\n    setVolumeFocused(!isVolumeFocused);\r\n    setIsFocused(!isFocused);\r\n  };\r\n\r\n  const handleControlsFocus = () => {\r\n    setIsFocused(!isFocused);\r\n  };\r\n\r\n  // PREVENT DOUBLECLICK TRAY ITEMS FROM TRIGGERING FULLSCREEN\r\n  const handleDoubleClick = (e) => {\r\n    e.stopPropagation();\r\n  };\r\n\r\n  const volumeTitle = Math.floor(values.volume * 100);\r\n  let controlsSize = \"1.2rem\";\r\n  let disconnectWidth = \"8%\";\r\n  if(videoWidth <= 600) controlsSize = \"1rem\";\r\n  if(videoWidth <= 500) {\r\n    controlsSize = \"0.95rem\";\r\n    disconnectWidth = \"10%\";\r\n  }\r\n  if(videoWidth <= 400) controlsSize = \"0.9rem\";\r\n\r\n  return(\r\n    <div className={styles.video__tray} \r\n      style={{\r\n        width: `${videoWidth <= 450 ? \"100%\" : \"\"}`, \r\n        \"--controls__size\": `${controlsSize}`,\r\n        \"--disconnect__width\": `${disconnectWidth}`\r\n      }} \r\n      onDoubleClick={handleDoubleClick}\r\n    >\r\n      <div className={`${isEditing ? styles[\"formDisplayName--active\"] : styles.formDisplayName}`}>\r\n        <EditWrapper \r\n          inputs={formInputs} \r\n          handleChange={handleChange} \r\n          clearInput={clearInput}\r\n          handleSubmit={handleSubmit}\r\n          handleClick={handleNameClick}\r\n          isEditing={isEditing}\r\n          hidden={true}\r\n        >\r\n          <button \r\n            type=\"button\" \r\n            className={`${styles.displayname} ${isMyStream ? \"\" : styles[\"displayName--disabled\"]}`} \r\n            onClick={handleNameClick}\r\n            disabled={!isMyStream}\r\n          >\r\n            {displayName || \"Silly Goose\"}\r\n          </button>\r\n        </EditWrapper>\r\n      </div>\r\n      <div className={`${styles.controls__tray} ${isFocused ? styles[\"controls__tray--active\"] : \"\"}`}>\r\n        {isMyStream\r\n          ? <>\r\n              <div className={styles.disconnect__container}>\r\n              <VideoControlsButton\r\n                type=\"button\" \r\n                buttonClass={`${styles.disconnect__button} ${styles.disconnect__button__padding}`}\r\n                spanClass={`${styles.disconnect__inner}`}\r\n                title=\"Disconnect from call\"\r\n                iconClass={`fas fa-phone-slash ${styles.controls__icon} ${styles.disconnect__icon}`}\r\n                handleClick={handleDisconnectClick}\r\n                handleFocus={handleControlsFocus}\r\n              />\r\n              </div>\r\n              <VideoControlsButton \r\n                buttonClass=\"video__button\"\r\n                title={playVideo ? \"Stop Video\" : \"Show Video\"}\r\n                iconClass={`fas ${styles.controls__icon} ${!playVideo ? `fa-video-slash ${styles[\"button--stop\"]}` : `fa-video`}`}\r\n                handleClick={handleVideoClick}\r\n                handleFocus={handleControlsFocus}\r\n              />\r\n              <VideoControlsButton \r\n                buttonClass=\"mic__button\"\r\n                title={playMic ? \"Mute\" : \"Unmute\"}\r\n                iconClass={`fas ${styles.controls__icon} ${!playMic ? `fa-microphone-slash ${styles[\"button--stop\"]}` : `fa-microphone`}`}\r\n                handleClick={handleMicClick}\r\n                handleFocus={handleControlsFocus}\r\n              />\r\n              <VideoControlsButton \r\n                buttonClass=\"screen__button\"\r\n                title={shareScreen ? \"Stop Screen Share\" : \"Share Screen\"}\r\n                iconClass={`fas fa-desktop ${styles.controls__icon} ${!shareScreen ? \"\" : styles[\"button--stop\"]}`}\r\n                handleClick={handleScreenClick}\r\n                handleFocus={handleControlsFocus}\r\n              />\r\n            </>\r\n          : <div className={`${styles.volume__controls} ${isVolumeFocused ? styles[`volume__controls--focus`]: \"\"}`}>\r\n              <button type=\"button\" className={styles.volume__button} onClick={handleVolumeClick} onFocus={handleControlsFocus} onBlur={handleControlsFocus}>\r\n                <i className={`fas ${styles.controls__icon} ${!isMuted ? `fa-volume-up`: `fa-volume-mute`} ${styles.volume}`}></i>\r\n              </button>\r\n              <input \r\n                className={styles.slider}\r\n                type=\"range\" \r\n                min=\"-0.01\"\r\n                max=\"2\" \r\n                step=\"0.01\" \r\n                name=\"volume\"\r\n                value={values.volume} \r\n                title={volumeTitle}\r\n                onChange={handleChange}\r\n                onFocus={handleFocus}\r\n                onBlur={handleFocus}\r\n              />\r\n            </div>\r\n        }\r\n        <VideoControlsButton \r\n          buttonClass=\"fullscreen__button\"\r\n          title={isFullScreen ? \"Exit Fullscreen\" : \"Fullscreen\"}\r\n          iconClass={`fas ${styles.controls__icon} ${!isFullScreen ? \"fa-expand\" : \"fa-compress\"}`}\r\n          handleClick={handleFullScreen}\r\n          handleFocus={handleControlsFocus}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoControls;","import {createAvatar} from \"@dicebear/avatars\";\r\nimport * as avatarStyle from \"@dicebear/avatars-identicon-sprites\";\r\nimport styles from \"./Identicon.module.css\";\r\n\r\nconst Identicon = ({seed}) => {\r\n  const identicon = createAvatar(avatarStyle, {\r\n    seed,\r\n    dataUri: true\r\n  });\r\n\r\n  return(\r\n    <img className={styles.identicon} src={identicon} alt=\"identicon\" />\r\n  );\r\n};\r\n\r\nexport default Identicon;","import {useState, useEffect, useRef} from \"react\";\r\nimport VideoControls from \"../VideoControls/VideoControls\";\r\nimport Identicon from \"../Identicon/Identicon\";\r\nimport styles from \"./Video.module.css\";\r\n\r\nconst Video = ({stream, displayName, isTalking, gainStreams, hasWebcam, containerStyles}) => {\r\n  const video = useRef(stream);\r\n  const wrapperRef = useRef(null);\r\n  const containerRef = useRef(null);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [isFullScreen, setIsFullScreen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if(video.current) {\r\n      video.current.srcObject = stream;\r\n    }\r\n  }, [video, stream, hasWebcam]);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('fullscreenchange', handleFullScreenExit, false);\r\n    document.addEventListener('mozfullscreenchange', handleFullScreenExit, false);\r\n    document.addEventListener('MSFullscreenChange', handleFullScreenExit, false);\r\n    document.addEventListener('webkitfullscreenchange', handleFullScreenExit, false);\r\n\r\n    return () => {\r\n      document.removeEventListener('fullscreenchange', handleFullScreenExit, false);\r\n      document.removeEventListener('mozfullscreenchange', handleFullScreenExit, false);\r\n      document.removeEventListener('MSFullscreenChange', handleFullScreenExit, false);\r\n      document.removeEventListener('webkitfullscreenchange', handleFullScreenExit, false);\r\n    };\r\n  }, []);\r\n\r\n  const handleMuted = () => {\r\n    setIsMuted(!isMuted);\r\n  };\r\n\r\n  const handleFullScreen = () => {\r\n    const element = wrapperRef.current;\r\n    const doc = window.document;\r\n\r\n    const requestFullScreen = \r\n                  element.requestFullscreen ||\r\n                  element.mozRequestFullScreen ||\r\n                  element.webkitRequestFullScreen ||\r\n                  element.msRequestFullscreen;\r\n    const cancelFullScreen = \r\n                  doc.exitFullscreen || \r\n                  doc.mozCancelFullScreen || \r\n                  doc.webkitExitFullscreen || \r\n                  doc.msExitFullscreen;\r\n    if (!doc.fullscreenElement && !doc.mozFullScreenElement && \r\n      !doc.webkitFullscreenElement && !doc.msFullscreenElement) {\r\n      requestFullScreen.call(element);\r\n      setIsFullScreen(true);\r\n    } else {\r\n      cancelFullScreen.call(doc);\r\n      setIsFullScreen(false);\r\n    }\r\n  };\r\n\r\n  const handleFullScreenExit = () => {\r\n    const doc = window.document;\r\n\r\n    if (!doc.fullscreenElement && !doc.mozFullScreenElement && \r\n      !doc.webkitFullscreenElement && !doc.msFullscreenElement) {\r\n        setIsFullScreen(false);\r\n      }\r\n  };\r\n\r\n  const contianerMarginStyles = containerRef.current ?  window.getComputedStyle(containerRef.current) : \"0px\";\r\n\r\n  return (\r\n    <div \r\n      ref={containerRef}\r\n      className={`${styles.container} ${isMuted ? styles.muted : \"\"} ${isTalking ? styles.speaking : styles.silent}`}\r\n      style={{\r\n        width: `calc(${containerStyles.width}px - (${contianerMarginStyles.marginLeft} + ${contianerMarginStyles.marginRight}))`, \r\n        height: `calc(${containerStyles.height}px - (${contianerMarginStyles.marginTop} + ${contianerMarginStyles.marginBottom}))`\r\n      }}\r\n    >\r\n      <div className={styles.wrapper} ref={wrapperRef} onDoubleClick={handleFullScreen}>\r\n        {hasWebcam\r\n          ? <video \r\n              id={stream.id} \r\n              className={`${styles.video} ${isFullScreen ? styles[\"video--fullscreen\"] : \"\"}`} \r\n              playsInline \r\n              ref={video} \r\n              autoPlay \r\n              muted \r\n              data-video-stream=\"video-stream\"\r\n            >\r\n            </video>\r\n          : <div id={stream.id} className={styles.identicon__container} data-video-stream=\"video-stream\">\r\n              <Identicon seed={stream.id} />\r\n            </div>\r\n        }\r\n        <VideoControls \r\n          stream={stream} \r\n          hasWebcam={hasWebcam}\r\n          displayName={displayName} \r\n          gainStreams={gainStreams} \r\n          handleMuted={handleMuted}\r\n          handleFullScreen={handleFullScreen}\r\n          isFullScreen={isFullScreen}\r\n          videoWidth={containerStyles.width}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Video;","import {useEffect, useState, useRef, useContext} from \"react\";\r\nimport ErrorDisplay from \"../ErrorDisplay/ErrorDisplay\";\r\nimport Loading from \"../Loading/Loading\";\r\nimport Video from \"../Video/Video\";\r\nimport {ChatContext} from \"../../context/ChatContext\";\r\nimport styles from \"./VideosContainer.module.css\";\r\n\r\nconst VideoContainer = ({videos, isTalking, gainStreams, hasPeerError, hasSocketError}) => {\r\n  const [containerStyles, setContainerStyles] = useState({});\r\n  const {isChatOpen, chatDimensions} = useContext(ChatContext);\r\n  const containerRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const recalculateLayout = () => {\r\n      let elFromTop = 0;\r\n      let chatWidth = 0;\r\n      \r\n      if(containerRef.current) {\r\n        elFromTop = Math.floor(containerRef.current.getBoundingClientRect().top + window.pageYOffset) + 15;\r\n      }\r\n      if(isChatOpen) chatWidth = chatDimensions.width;\r\n      const aspectRatio = 16 / 9;\r\n      const screenWidth = document.body.getBoundingClientRect().width - chatWidth;\r\n      const screenHeight = window.innerHeight - elFromTop;\r\n      const videoCount = Object.keys(videos).length;\r\n  \r\n      const calculateLayout = (\r\n        containerWidth,\r\n        containerHeight,\r\n        videoCount,\r\n        aspectRatio\r\n      ) => {\r\n        let bestLayout = {\r\n          area: 0,\r\n          cols: 0,\r\n          rows: 0,\r\n          width: 0,\r\n          height: 0\r\n        };\r\n  \r\n        for(let cols = 1; cols <= videoCount; cols++) {\r\n          const rows = Math.ceil(videoCount / cols);\r\n          const hScale = containerWidth / (cols * aspectRatio);\r\n          const vScale = containerHeight / rows;\r\n          let width;\r\n          let height;\r\n          if(hScale <= vScale) {\r\n            width = Math.floor(containerWidth / cols);\r\n            height = Math.floor(width / aspectRatio);\r\n          }\r\n          else {\r\n            height = Math.floor(containerHeight / rows);\r\n            width = Math.floor(height * aspectRatio);\r\n          }\r\n          \r\n          const area = width * height;\r\n          if(area > bestLayout.area) {\r\n            bestLayout = {\r\n              area,\r\n              width,\r\n              height,\r\n              rows,\r\n              cols\r\n            };\r\n          }\r\n        }\r\n        return bestLayout;\r\n      };\r\n  \r\n      const {width, height, cols} = calculateLayout(screenWidth, screenHeight, videoCount, aspectRatio);\r\n      setContainerStyles(style => ({...style, width, height, cols}));\r\n    };\r\n\r\n    window.addEventListener(\"resize\", recalculateLayout);\r\n    recalculateLayout();\r\n\r\n    return () => {\r\n      window.removeEventListener(\"resize\", recalculateLayout);\r\n    };\r\n  }, [videos, isChatOpen, chatDimensions]);\r\n\r\n  const renderVideo = () => {\r\n    return Object.values(videos).map((video, i) => {\r\n      return (\r\n        <Video \r\n          key={i} \r\n          stream={video.streamID} \r\n          displayName={video.displayName} \r\n          isTalking={isTalking?.[video.streamID.id]}\r\n          gainStreams={gainStreams?.[video.streamID.id]}\r\n          hasWebcam={video.hasWebcam}\r\n          containerStyles={containerStyles}\r\n        />\r\n      );\r\n    });\r\n  };\r\n\r\n  if(hasSocketError) {\r\n    return(\r\n      <div className={styles.error}>\r\n        <ErrorDisplay error={hasSocketError} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if(hasPeerError) {\r\n    return(\r\n      <div className={styles.error}>\r\n        <ErrorDisplay error={hasPeerError} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if(!Object.keys(videos).length) {\r\n    return(\r\n      <div className={styles.loading}>\r\n        <Loading />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return(\r\n    <div ref={containerRef} className={styles.videos} style={{maxWidth: `calc(${containerStyles.width}px * ${containerStyles.cols})`}}>\r\n      {renderVideo()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoContainer;","import { useContext } from \"react\";\r\nimport { SocketContext } from \"../../context/SocketContext\";\r\nimport styles from \"./ChatHeader.module.css\";\r\n\r\nconst ChatHeader = () => {\r\n  const {users, roomName} = useContext(SocketContext);\r\n  const totalOnline = Object.keys(users).length;\r\n\r\n  return(\r\n    <div className={styles.container}>\r\n      <h2 className={styles.chat__header}>{roomName}</h2>\r\n      <p className={styles.chat__online}>Currently Online: {totalOnline}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatHeader;","import {format} from \"date-fns\";\r\nimport styles from \"./ChatUserHeader.module.css\";\r\n\r\nconst ChatUserHeader = ({username, timestamp}) => {\r\n  const formattedTimestamp = format(timestamp, \"h:mm bbb\");\r\n\r\n  return(\r\n    <div className={styles.container}>\r\n      <h3 className={styles.header}>{username}</h3>\r\n      <p className={styles.timestamp}>{formattedTimestamp}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatUserHeader;","import {useState, useEffect} from \"react\";\r\nimport isURL from \"validator/lib/isURL\";\r\nimport styles from \"./ChatUserMessage.module.css\";\r\n\r\nconst ChatUserMessage = ({message, ogMeta}) => {\r\n  const [hasURL, setHasURL] = useState(false);\r\n  const [srcURL, setSrcURL] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const checkMessagesForURL = () => {\r\n      let regExp = null;\r\n      let match = null;\r\n      // https://stackoverflow.com/questions/28735459/how-to-validate-youtube-url-in-client-side-in-text-box\r\n      if (message !== undefined || message !== \"\") { \r\n        regExp = /^(?:https?:\\/\\/)?(?:m\\.|www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?$/;\r\n      }\r\n      let messages = message.replace(/\\n/g, \" \").split(\" \");\r\n      for(const value of messages) {\r\n        match = value.match(regExp);\r\n        if(match && match[1].length === 11) {\r\n          setHasURL(true);\r\n          setSrcURL(match[1]);\r\n          return;\r\n        }\r\n      }\r\n    };\r\n    \r\n    if(message.length) {\r\n      checkMessagesForURL();\r\n    }\r\n  }, [message]);\r\n\r\n  const handleStringToURL = () => {\r\n    let messageArr = message.replace(/\\n/g, \" \").split(\" \");\r\n    let linksArray = messageArr.filter(msg => isURL(msg, {require_protocol: true}));\r\n    if(!linksArray.length) return message;\r\n\r\n    let finalMessageArray = [];\r\n    let linkIndex = 0;\r\n    let startIndex = 0;\r\n    let beginningString = 0;\r\n    let link = null;\r\n\r\n    for(let i = 0; i < linksArray.length; i++) {\r\n      linkIndex = message.substring(beginningString).indexOf(linksArray[i]) + beginningString;\r\n      beginningString = message.slice(startIndex, linkIndex);\r\n      link = {link: linksArray[i]};\r\n      finalMessageArray.push(beginningString, link);\r\n      startIndex = linkIndex + linksArray[i].length;\r\n      beginningString = linkIndex + linksArray[i].length;\r\n    }\r\n    finalMessageArray.push(message.slice(startIndex));\r\n\r\n    return finalMessageArray.map((msg, i) => {\r\n      if(typeof msg === \"string\") return <span key={i}>{msg}</span>\r\n      return <a key={i} href={msg.link} className={styles.link} target=\"_blank\" rel=\"noopener noreferrer\">{msg.link}</a>;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <p className={styles.message}>{handleStringToURL()}</p>\r\n      {hasURL &&\r\n        <div className={styles.iframe__container}>\r\n          <iframe \r\n            className={`embedded__video ${styles.iframe}`}\r\n            title=\"video\"\r\n            type=\"text/html\" \r\n            frameBorder=\"0\" \r\n            height=\"200\"\r\n            allowFullScreen \r\n            src={`https://www.youtube.com/embed/${srcURL}?autoplay=0&enablejsapi=1&rel=0&version=3`}\r\n          ></iframe>\r\n        </div>\r\n      }\r\n      {!hasURL && ogMeta.success && \r\n        <div className={styles.ogCard__container}>\r\n          <a href={ogMeta.requestUrl} className={styles.ogCard__link} target=\"_blank\" rel=\"noopener noreferrer\">\r\n            <div className={`${styles.ogCard__image__container} ${ogMeta.ogImage ? \"\" : styles.hidden}`}>\r\n              <img src={ogMeta.ogImage?.url} alt={ogMeta.ogTitle} className={styles.ogCard__image} />\r\n            </div>\r\n            <div className={styles.ogCard__description__container}>\r\n              <p className={styles.ogCard__description}>{ogMeta.ogTitle}</p>\r\n            </div>\r\n          </a>\r\n        </div>\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatUserMessage;","import Identicon from \"../Identicon/Identicon\";\r\nimport ChatUserHeader from \"../ChatUserHeader/ChatUserHeader\";\r\nimport ChatUserMessage from \"../ChatUserMessage/ChatUserMessage\";\r\nimport styles from \"./ChatUser.module.css\";\r\n\r\nconst ChatUser = ({messageData}) => {\r\n\r\n  const renderMessage = () => {\r\n    return messageData.message.map((message, i) => {\r\n      return <ChatUserMessage key={messageData.id[i]} message={message} ogMeta={messageData.ogMeta[i]} />\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.message__header}>\r\n        <div className={styles.identicon}>\r\n          <Identicon seed={messageData.streamID} />\r\n        </div>\r\n        <ChatUserHeader username={messageData.userName} timestamp={messageData.createdAt} />\r\n      </div>\r\n      <div className={styles.message}>\r\n        {renderMessage()}\r\n      </div>\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default ChatUser;","import {useRef, useContext, useEffect} from \"react\";\r\nimport ChatUser from \"../ChatUser/ChatUser\";\r\nimport {ChatContext} from \"../../context/ChatContext\";\r\nimport styles from \"./ChatMessages.module.css\";\r\n\r\nconst ChatMessages = () => {\r\n  const {messageList, isAtTop, setIsAtTop, hasOlderMessages, hasInitMessages} = useContext(ChatContext);\r\n  const containerRef = useRef(null);\r\n  const bottomMessagesRef = useRef(null);\r\n\r\n  const lastScrollHeight = containerRef.current?.scrollHeight;\r\n\r\n  useEffect(() => {\r\n    const newMessageScroll = () => {\r\n      if(!containerRef.current) return;\r\n\r\n      const scrollTop = containerRef.current.scrollTop;\r\n      const scrollHeight = containerRef.current.scrollHeight;\r\n      const height = containerRef.current.clientHeight;\r\n\r\n      if(scrollHeight === height && hasInitMessages && !isAtTop && hasOlderMessages) {\r\n        setIsAtTop(true);\r\n        return;\r\n      }\r\n      if(messageList.length && hasOlderMessages) {\r\n        containerRef.current.scrollTop = scrollHeight - lastScrollHeight;\r\n      }\r\n      if((scrollHeight - scrollTop) <= (height + 125) && scrollHeight !== height) {\r\n        bottomMessagesRef.current?.scrollIntoView();\r\n      }\r\n    };\r\n\r\n    newMessageScroll();\r\n  }, [messageList, isAtTop, lastScrollHeight, hasOlderMessages, setIsAtTop, hasInitMessages]);\r\n\r\n  useEffect(() => {\r\n    let containerRefValue = null;\r\n\r\n    const handleScroll = () => {\r\n      const scrollTop = containerRef.current.scrollTop;\r\n  \r\n      if(scrollTop === 0 && messageList.length && hasOlderMessages) {\r\n        setIsAtTop(prev => true);\r\n      }\r\n      else {\r\n        setIsAtTop(false);\r\n      }\r\n    };\r\n\r\n    if(containerRef.current) {\r\n      containerRef.current.addEventListener(\"scroll\", handleScroll);\r\n      containerRefValue = containerRef.current;\r\n    }\r\n\r\n    return () => {\r\n      if(containerRefValue) {\r\n        containerRefValue.removeEventListener(\"scroll\", handleScroll);\r\n      }\r\n    };\r\n  }, [messageList, hasOlderMessages, setIsAtTop])\r\n\r\n  const combineMessages = (messagesData) => {\r\n    if(!messagesData.length) return [];\r\n\r\n    let messages = messagesData.map(obj => ({...obj}));\r\n    let newMessages = [];\r\n    let currentUser = messages[0];\r\n    currentUser.message = [currentUser.message];\r\n    currentUser.id = [currentUser.id];\r\n    currentUser.ogMeta = [currentUser.ogMeta];\r\n\r\n    for(let i = 1; i < messages.length; i++) {\r\n      if(!Array.isArray(currentUser.message)) currentUser.message = [currentUser.message];\r\n      if(messages[i].streamID === currentUser.streamID) {\r\n        currentUser.message = [...currentUser.message, messages[i].message];\r\n        currentUser.id = [...currentUser.id, messages[i].id];\r\n        currentUser.ogMeta = [...currentUser.ogMeta, messages[i].ogMeta];\r\n        \r\n      }\r\n      else {\r\n        newMessages.push(currentUser);\r\n        currentUser = messages[i];\r\n        currentUser.message = [currentUser.message];\r\n        currentUser.id = [currentUser.id];\r\n        currentUser.ogMeta = [currentUser.ogMeta];\r\n      }\r\n    }\r\n    \r\n    newMessages.push(currentUser);\r\n    return newMessages;\r\n  };\r\n\r\n  const renderMessages = () => {\r\n    const messages = combineMessages(messageList);\r\n    return messages.map((msg)=> {\r\n      return <ChatUser key={msg.id[0]} messageData={msg} />;\r\n    });\r\n  };\r\n\r\n  return(\r\n    <div ref={containerRef} className={styles.container}>\r\n      <div className={styles.header}>\r\n        {hasOlderMessages\r\n          ? <div className={isAtTop ? styles.loading : \"\"}></div>\r\n          : <p className={styles.welcome__message}>Welcome to the Chat Room!</p>\r\n        }\r\n      </div>\r\n      {renderMessages()}\r\n      <div ref={bottomMessagesRef}></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatMessages;","const messageInputs = [\r\n  {\r\n    label: \"Send message...\",\r\n    name: \"message\",\r\n    required: true,\r\n    id: \"message-1\",\r\n    autoComplete: \"off\",\r\n    formType: \"textarea\"\r\n  }\r\n];\r\n\r\nexport {messageInputs};","const emojiTrayMap = [\r\n  \"blush\", \r\n  \"smile\", \r\n  \"joy\", \r\n  \"rolling_on_the_floor_laughing\", \r\n  \"heart_eyes\", \r\n  \"sweat_smile\",\r\n  \"kissing_heart\",\r\n  \"smiling_face_with_3_hearts\",\r\n  \"smiley\",\r\n  \"relaxed\",\r\n  \"hugging_face\"\r\n];\r\n\r\nexport {emojiTrayMap};","import {useEffect, useState, useRef, useContext} from \"react\";\r\nimport useForm from \"../../hooks/useForm\";\r\nimport {ChatContext} from \"../../context/ChatContext\";\r\nimport {messageInputs} from \"../../data/messageInputs\";\r\nimport {emojiTrayMap} from \"../../data/emojiTrayMap\";\r\nimport EditWrapper from \"../EditWrapper/EditWrapper\";\r\nimport {Picker, Emoji, emojiIndex} from \"emoji-mart\";\r\nimport \"emoji-mart/css/emoji-mart.css\";\r\nimport styles from \"./ChatInput.module.css\";\r\n\r\nconst ChatInput = () => {\r\n  const {values, handleChange, handleAdd, clearInput} = useForm({message: \"\"});\r\n  const [showEmojis, setShowEmojis] = useState(false);\r\n  const [trayEmoji, setTrayEmoji] = useState(\"blush\");\r\n  const [sent, setSent] = useState(false);\r\n  const {setMessage} = useContext(ChatContext);\r\n  const hasConvertedRef = useRef(false);\r\n  const nodeRef = useRef(null);\r\n\r\n  const formInputs = messageInputs.map(input => {\r\n    return {\r\n      ...input,\r\n      [input.name]: values[input.name]\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    const convertInputToEmoji = (userText) => {\r\n      if(!userText.length) return;\r\n      const textArray = userText.split(\" \");\r\n      let newValues = [];\r\n  \r\n      for(let value of textArray) {\r\n        if(value[0] !== \":\") {\r\n          newValues.push(value);\r\n          continue;\r\n        }\r\n  \r\n        let emojiArray = [];\r\n        let isEmojiCode = value[value.length - 1] === \":\" && value.length > 1;\r\n  \r\n        if(isEmojiCode) value = value.replaceAll(\":\", \"\");\r\n  \r\n        emojiArray = emojiIndex.search(value).filter(emoji => {\r\n          if(!isEmojiCode && emoji.emoticons.length) {\r\n            for(let emoticon of emoji.emoticons) {\r\n              if(emoticon === value) return emoji.native;\r\n            }\r\n          }\r\n          if(value === emoji.id) return emoji.native;\r\n          return false\r\n        });\r\n        \r\n        if(emojiArray.length) newValues.push(emojiArray[0].native);\r\n        else {\r\n          newValues.push(value);\r\n        }\r\n      }\r\n  \r\n      let newText = newValues.join(\" \");\r\n      if(newText !== userText) {\r\n        const pseudoTarget = {target : {value: newText, name: \"message\"}};\r\n        hasConvertedRef.current = true;\r\n        handleChange(pseudoTarget);\r\n      }\r\n    };\r\n\r\n    if(!hasConvertedRef.current) {\r\n      convertInputToEmoji(values.message);\r\n    }\r\n    else {\r\n      hasConvertedRef.current = false;\r\n    }\r\n  }, [values, handleChange]);\r\n\r\n  useEffect(() => {\r\n    if(showEmojis) {\r\n      window.addEventListener(\"mousedown\", handleClickOutside);\r\n    }\r\n    else {\r\n      window.removeEventListener(\"mousedown\", handleClickOutside);\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener(\"mousedown\", handleClickOutside);\r\n    }\r\n  }, [showEmojis]);\r\n\r\n  const handleClickOutside = (e) => {\r\n    if(nodeRef.current.contains(e.target)) return;\r\n\r\n    setShowEmojis(false);\r\n  };\r\n\r\n  const handleClick = () => {\r\n    setShowEmojis(!showEmojis);\r\n  };\r\n\r\n  const handleSendClick = () => {\r\n    if(values.message.length) {\r\n      setMessage(values.message);\r\n      clearInput(\"message\");\r\n      setSent(true);\r\n      setTimeout(() => {setSent(false)}, 900);\r\n    }\r\n  };\r\n\r\n  const handleSendSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleSendClick();\r\n  }\r\n  \r\n  const handleEmojiHover = () => {\r\n    let newEmoji = emojiTrayMap[Math.floor(Math.random() * emojiTrayMap.length)];\r\n    while(newEmoji === trayEmoji) {\r\n      newEmoji = emojiTrayMap[Math.floor(Math.random() * emojiTrayMap.length)];\r\n    }\r\n    setTrayEmoji(newEmoji);\r\n  };\r\n\r\n  const handleEmoji = (e) => {\r\n    const pseudoTarget = {target : {value: e.native, name: \"message\"}};\r\n    handleAdd(pseudoTarget);\r\n  };\r\n\r\n  return(\r\n    <div className={styles.container}>\r\n      <div className={styles.input__container}>\r\n        <EditWrapper \r\n          inputs={formInputs} \r\n          handleChange={handleChange} \r\n          clearInput={clearInput} \r\n          handleSubmit={handleSendSubmit} \r\n          isEditing={true} \r\n          hideButton={true}\r\n        />\r\n      </div>\r\n      <div className={styles.controls__container}>\r\n        <div ref={nodeRef} className={styles.emoji__container}>\r\n          <button \r\n            type=\"button\" \r\n            title={\"Pick your emoji...\"}\r\n            className={styles.emoji__button} \r\n            onClick={handleClick} \r\n            onMouseOver={handleEmojiHover}\r\n          >\r\n            <Emoji emoji={trayEmoji} size={18} native={true} />\r\n          </button>\r\n          {showEmojis &&\r\n            <div className={styles.emoji__mart}>\r\n              <Picker \r\n                title={\"Pick your emoji...\"} \r\n                onSelect={handleEmoji}\r\n                emoji={\"wave\"}\r\n                native={true}\r\n              />\r\n            </div>\r\n          }\r\n        </div>\r\n        <button type=\"button\" className={`${styles.send__button}`} onClick={handleSendClick}>\r\n          <i className={`fas fa-play ${styles.send__icon} ${sent ? styles[\"send__button--active\"] : \"\"}`}></i>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatInput;","import ChatHeader from \"../ChatHeader/ChatHeader\";\r\nimport ChatMessages from \"../ChatMessages/ChatMessages\";\r\nimport ChatInput from \"../ChatInput/ChatInput\";\r\nimport styles from \"./ChatList.module.css\";\r\n\r\nconst ChatList = () => {\r\n  return(\r\n    <div className={styles.container}>\r\n      <ChatHeader />\r\n      <ChatMessages />\r\n      <ChatInput />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatList;","import {useEffect, useRef, useContext} from \"react\";\r\nimport ChatList from \"../ChatList/ChatList\";\r\nimport {ChatContext} from \"../../context/ChatContext\";\r\nimport styles from \"./ChatContainer.module.css\";\r\n\r\nconst ChatContainer = () => {\r\n  const {isChatOpen, setIsChatOpen, chatDimensions, setChatDimensions} = useContext(ChatContext);\r\n  const containerRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      const width = containerRef.current.getBoundingClientRect()?.width;\r\n  \r\n      if(width !== chatDimensions.width) {\r\n        setChatDimensions(dimensions => ({...dimensions, width}));\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"resize\", handleResize);\r\n    handleResize();\r\n\r\n    return () => {\r\n      window.removeEventListener(\"resize\", handleResize);\r\n    };\r\n  }, [chatDimensions, setChatDimensions]);\r\n\r\n  useEffect(() => {\r\n    if(!isChatOpen) handleVideosReset();\r\n  }, [isChatOpen]);\r\n\r\n  const handleVideosReset = () => {\r\n    let videos = document.querySelectorAll(\".embedded__video\");\r\n    if(!videos.length) return;\r\n    videos.forEach(video => {\r\n      video.contentWindow.postMessage(`{\"event\":\"command\",\"func\":\"stopVideo\",\"args\":\"\"}`, \"*\");\r\n    });\r\n  };\r\n\r\n  const handleClick = () => {\r\n    setIsChatOpen(!isChatOpen);\r\n  };\r\n\r\n  return (\r\n    <div ref={containerRef} className={`${styles.container} ${isChatOpen ? styles[\"container--on\"] : \"\"}`}>\r\n      <button type=\"button\" className={styles.chat__button} onClick={handleClick}>\r\n        <i className={`fas fa-chevron-left ${styles.chevron} ${isChatOpen ? styles[\"chevron--open\"] : styles.hidden}`}></i>\r\n        <i className={`fas fa-chevron-right ${styles.chevron} ${isChatOpen ? styles.hidden : styles[\"chevron--closed\"]}`}></i>\r\n      </button>\r\n      <div className={`${styles.chat__container} ${isChatOpen ? \"\" : styles[\"chat__container--closed\"]}`}>\r\n        <ChatList />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatContainer;","import {useEffect, useContext} from \"react\";\r\nimport {SocketContext} from \"../../context/SocketContext\";\r\nimport {ChatContext} from \"../../context/ChatContext\";\r\nimport {useLocation} from \"react-router-dom\";\r\nimport VideoRoomHeader from \"../VideoRoomHeader/VideoRoomHeader\";\r\nimport VideoContainer from \"../VideosContainer/VideosContainer\";\r\nimport ChatContainer from \"../ChatContainer/ChatContainer\";\r\nimport useStateToLocalStorage from \"../../hooks/useStateToLocalStorage\";\r\nimport styles from \"./RoomContainer.module.css\";\r\n\r\nconst RoomContainer = () => {\r\n  const {\r\n    isHost,\r\n    setParams, \r\n    setDisplayName, \r\n    roomName: hostRoomName, \r\n    setRoomName: setHostRoomName, \r\n    videoStreams, \r\n    isTalking, \r\n    gainStreams,\r\n    hasPeerError,\r\n    hasSocketError\r\n  } = useContext(SocketContext);\r\n  const {isChatOpen, chatDimensions} = useContext(ChatContext);\r\n  const location = useLocation();\r\n  const [userName] = useStateToLocalStorage(\"userName\");\r\n  const [roomName, setRoomName] = useStateToLocalStorage(\"roomName\");\r\n\r\n  const searchParams = location.pathname.split(\"/\");\r\n  const roomID = searchParams[searchParams.length - 1];\r\n\r\n  useEffect(() => {\r\n    setDisplayName(userName);\r\n    setHostRoomName(roomName);\r\n  }, [userName, setDisplayName, roomName, setHostRoomName]);\r\n\r\n  useEffect(() => {\r\n    setParams(roomID);\r\n\r\n    return () => {\r\n      setParams(\"\");\r\n    };\r\n  }, [setParams, roomID, location]);\r\n\r\n  return(\r\n    <div \r\n      className={styles.container}\r\n      style={{paddingRight: isChatOpen ? chatDimensions.width : 0}}\r\n    >\r\n      <VideoRoomHeader room={hostRoomName ? hostRoomName : roomName} setRoomName={setRoomName} isHost={isHost} />\r\n      <VideoContainer \r\n        videos={videoStreams} \r\n        isTalking={isTalking} \r\n        gainStreams={gainStreams}\r\n        hasPeerError={hasPeerError}\r\n        hasSocketError={hasSocketError}\r\n      />\r\n      <ChatContainer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RoomContainer;","import {BrowserRouter, Switch, Route} from \"react-router-dom\";\r\nimport NavBar from \"./NavBar/NavBar\";\r\nimport HomeContainer from \"./HomeContainer/HomeContainer\";\r\nimport RoomContainer from \"./RoomContainer/RoomContainer\";\r\nimport styles from \"./App.module.css\";\r\n\r\nconst App = () => {\r\n\r\n  return(\r\n    <BrowserRouter>\r\n      <NavBar />\r\n      <div style={{height: \"70px\"}}></div>\r\n      <Switch>\r\n        <Route path=\"/\" exact component={HomeContainer} />\r\n        <Route path=\"/room/:id\" component={RoomContainer} />\r\n      </Switch>\r\n    </BrowserRouter>\r\n  );\r\n};\r\n\r\nexport default App;","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./components/App\";\r\nimport { SocketContextProvider } from \"./context/SocketContext\";\r\nimport { ChatContextProvider } from \"./context/ChatContext\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <SocketContextProvider>\r\n      <ChatContextProvider>\r\n        <App />\r\n      </ChatContextProvider>\r\n    </SocketContextProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ChatUserMessage_container__1WJit\",\"message\":\"ChatUserMessage_message__BVE9a\",\"link\":\"ChatUserMessage_link__1weps\",\"iframe__container\":\"ChatUserMessage_iframe__container__25goN\",\"ogCard__container\":\"ChatUserMessage_ogCard__container__EPmr5\",\"ogCard__link\":\"ChatUserMessage_ogCard__link__2_oqD\",\"ogCard__description__container\":\"ChatUserMessage_ogCard__description__container__lV1k7\",\"ogCard__image\":\"ChatUserMessage_ogCard__image__9cvqH\",\"ogCard__image__container\":\"ChatUserMessage_ogCard__image__container__2HUtk\",\"ogCard__description\":\"ChatUserMessage_ogCard__description__2tbER\",\"hidden\":\"ChatUserMessage_hidden__qtKe8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container__input\":\"FormInputs_container__input__1QS_7\",\"input\":\"FormInputs_input__8Dn1T\",\"label\":\"FormInputs_label__P9l6v\",\"textarea\":\"FormInputs_textarea__2194B\",\"input__options\":\"FormInputs_input__options__gr_jY\",\"input__options--active\":\"FormInputs_input__options--active__22_4C\",\"clear\":\"FormInputs_clear__3INjI\",\"paste\":\"FormInputs_paste__psKZv\",\"move__scrollbar\":\"FormInputs_move__scrollbar__1GLxC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ChatContainer_container__1Mk_Q\",\"container--on\":\"ChatContainer_container--on__FDfzR\",\"chat__container\":\"ChatContainer_chat__container__wrEdU\",\"chat__container--closed\":\"ChatContainer_chat__container--closed__2LfQy\",\"chat__button\":\"ChatContainer_chat__button__3GTyN\",\"chevron\":\"ChatContainer_chevron__1RrBs\",\"chevron--open\":\"ChatContainer_chevron--open__k0_um\",\"rotateChevron\":\"ChatContainer_rotateChevron__K13ud\",\"chevron--closed\":\"ChatContainer_chevron--closed__2Y_c9\",\"clickMe\":\"ChatContainer_clickMe__18yfl\",\"hidden\":\"ChatContainer_hidden___mWPU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ChatInput_container__3nd26\",\"input__container\":\"ChatInput_input__container__2FSOS\",\"controls__container\":\"ChatInput_controls__container__1LUiC\",\"emoji__container\":\"ChatInput_emoji__container__GjUow\",\"emoji__button\":\"ChatInput_emoji__button__25bIN\",\"emoji__mart\":\"ChatInput_emoji__mart__2t9BR\",\"send__button\":\"ChatInput_send__button__wxh4H\",\"send__button--active\":\"ChatInput_send__button--active__2ZlHj\",\"sent\":\"ChatInput_sent__1Us3o\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Video_container__2m10r\",\"speaking\":\"Video_speaking__3bK5y\",\"muted\":\"Video_muted__3jDAv\",\"wrapper\":\"Video_wrapper__iL1j5\",\"video\":\"Video_video__1hg4k\",\"video--fullscreen\":\"Video_video--fullscreen__12fAr\",\"identicon__container\":\"Video_identicon__container__yplsP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"HomeHeader_container__Wrv0t\",\"main__header\":\"HomeHeader_main__header__1SH44\",\"sub__header\":\"HomeHeader_sub__header__1JEOk\",\"popIn\":\"HomeHeader_popIn__HIZ_-\",\"cycled__word\":\"HomeHeader_cycled__word__2gnij\",\"cycleFadeDown\":\"HomeHeader_cycleFadeDown__24l6n\",\"cycled__word--stop\":\"HomeHeader_cycled__word--stop__1tGzb\",\"fadeDown\":\"HomeHeader_fadeDown__2F6VE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"edit\":\"EditWrapper_edit__q6ooH\",\"edit--active\":\"EditWrapper_edit--active__1saV1\",\"hidden\":\"EditWrapper_hidden__1kMsW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"VideoRoomHeader_header___ukT-\",\"header__container\":\"VideoRoomHeader_header__container__3ODs3\",\"header__container--active\":\"VideoRoomHeader_header__container--active__3jRZJ\",\"heading\":\"VideoRoomHeader_heading__2VE50\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"videos\":\"VideosContainer_videos__31vVT\",\"error\":\"VideosContainer_error__piWun\",\"loading\":\"VideosContainer_loading__DaLvf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ChatUser_container__WnbYy\",\"identicon\":\"ChatUser_identicon__3cbnm\",\"message__header\":\"ChatUser_message__header__2RvSv\",\"message\":\"ChatUser_message__Ff-QO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ChatMessages_container__1PA_J\",\"header\":\"ChatMessages_header__1jKAF\",\"welcome__message\":\"ChatMessages_welcome__message__11SFS\",\"loading\":\"ChatMessages_loading__23GSl\",\"spinner\":\"ChatMessages_spinner__1J03K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"HomeContainer_container__2OWO0\",\"hideOverflow\":\"HomeContainer_hideOverflow__Laf0D\",\"header__container\":\"HomeContainer_header__container__2Coir\",\"fadeDown\":\"HomeContainer_fadeDown__1l1O3\",\"forms\":\"HomeContainer_forms__3R434\",\"fadeUp\":\"HomeContainer_fadeUp__1jQWR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"CopyButton_button__33FwW\",\"copy\":\"CopyButton_copy__1EtQe\",\"hidden\":\"CopyButton_hidden__3t-ys\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Loading_container__1vnCb\",\"message\":\"Loading_message__17BS-\",\"loading\":\"Loading_loading__2vOqd\",\"spinner\":\"Loading_spinner__BtxRW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ChatHeader_container__ki7qG\",\"chat__header\":\"ChatHeader_chat__header__12SkO\",\"chat__online\":\"ChatHeader_chat__online__3-dkL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ChatUserHeader_container__3Vmuc\",\"header\":\"ChatUserHeader_header__1ovbY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"NavBar_nav__3f64e\",\"container\":\"NavBar_container__1gjCp\",\"logo__container\":\"NavBar_logo__container__u7Q9A\",\"logo\":\"NavBar_logo__3Ggka\",\"underline\":\"NavBar_underline__25kKw\",\"hamburger\":\"NavBar_hamburger__1fhMF\",\"line\":\"NavBar_line__1Py63\",\"line__one\":\"NavBar_line__one__3HY3Z\",\"line__two\":\"NavBar_line__two__38xtl\",\"line__three\":\"NavBar_line__three__zoKee\",\"line__one--open\":\"NavBar_line__one--open__rP7u5\",\"lineOneOpen\":\"NavBar_lineOneOpen__iLHEk\",\"line__two--open\":\"NavBar_line__two--open__1DcaF\",\"lineTwoOpen\":\"NavBar_lineTwoOpen__1FDWm\",\"line__three--open\":\"NavBar_line__three--open__91RHN\",\"lineThreeOpen\":\"NavBar_lineThreeOpen__2yT8j\",\"line__one--closed\":\"NavBar_line__one--closed__1YY7k\",\"line__two--closed\":\"NavBar_line__two--closed__1Vakl\",\"line__three--closed\":\"NavBar_line__three--closed__3jOE3\",\"hidden\":\"NavBar_hidden__3pdTF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"CreateRoom_container__3jjQr\",\"header\":\"CreateRoom_header__2fA2z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"video__tray\":\"VideoControls_video__tray__1jfET\",\"formDisplayName\":\"VideoControls_formDisplayName__MSjh6\",\"formDisplayName--active\":\"VideoControls_formDisplayName--active__2UdrF\",\"displayname\":\"VideoControls_displayname__3Z2J6\",\"displayName--disabled\":\"VideoControls_displayName--disabled__UhKWK\",\"controls__tray\":\"VideoControls_controls__tray__1I-aI\",\"controls__tray--active\":\"VideoControls_controls__tray--active__1OuEI\",\"disconnect__container\":\"VideoControls_disconnect__container__2bZJX\",\"disconnect__button\":\"VideoControls_disconnect__button__3P_eV\",\"disconnect__button__padding\":\"VideoControls_disconnect__button__padding__1KWkr\",\"disconnect__inner\":\"VideoControls_disconnect__inner__1AtOI\",\"button--stop\":\"VideoControls_button--stop__14Sq_\",\"volume__controls\":\"VideoControls_volume__controls__2BPI1\",\"volume__controls--focus\":\"VideoControls_volume__controls--focus__1bBfB\",\"slider\":\"VideoControls_slider__2uUhy\",\"volume__button\":\"VideoControls_volume__button__tHp-0\",\"volume\":\"VideoControls_volume__XOgz7\",\"controls__icon\":\"VideoControls_controls__icon__1PGqM\",\"hidden\":\"VideoControls_hidden__t-zo-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"JoinRoom_container__1yJmR\",\"header\":\"JoinRoom_header__3U2fw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"ErrorDisplay_error__2hZXS\",\"error__message\":\"ErrorDisplay_error__message__1mabM\"};"],"sourceRoot":""}